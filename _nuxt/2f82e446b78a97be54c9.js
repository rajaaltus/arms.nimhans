(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{490:function(e,t,r){"use strict";r.r(t);r(36),r(23),r(11),r(14),r(4),r(24),r(37),r(7);var n=r(0),c=r(15),o=r(20),l=r(43),d=r.n(l);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable})),t.push.apply(t,r)}return t}var h,m,f,k,I={data:function(){return{loading:!1,date:!1,valid:!0,value:"Hello!",reportYears:[{id:2017,val:"2017-2018"},{id:2018,val:"2018-2019"},{id:2019,val:"2019-2020"},{id:2020,val:"2020-2021"}],selectedYear:0,dialog:!1,headers:[{text:"Id",align:"left",value:"id"},{text:"Project Name / Title",value:"projectName"},{text:"Investigator Type",value:"investigatorType"},{text:"Name of the Investigator",value:"investigatorName"},{text:"Project Duration",value:"projectTotalDuration"},{text:"Source of Funding",value:"fundingSource"},{text:"Status",value:"researchStatus"},{text:"Abstract",value:"researchAbstract"},{text:"Approval Status",value:"approvalStatus"},{text:"Actions",value:"action",sortable:!1}],research:{annualYear:0,approvalStatus:"PENDING",approvedBy:"",approvedDate:"",currentYearFunding:0,departmentId:0,fundingAgency:"",fundingForReviewPeriod:0,fundingSource:"",investigatorName:"",investigatorType:"",projectName:"",projectTotalDuration:0,rejectedReason:"",researchAbstract:"",researchStatus:"",status:"VALID",studentProject:!0,userProfileId:0},editedIndex:-1,editedItem:{annualYear:0,approvalStatus:"PENDING",approvedBy:"",approvedDate:"",currentYearFunding:0,departmentId:0,fundingAgency:"",fundingForReviewPeriod:0,fundingSource:"",investigatorName:"",investigatorType:"",projectName:"",projectTotalDuration:0,rejectedReason:"",researchAbstract:"",researchStatus:"",status:"VALID",studentProject:!0,userProfileId:0},deletedItem:{annualYear:0,approvalStatus:"PENDING",approvedBy:"",approvedDate:"",currentYearFunding:0,departmentId:0,fundingAgency:"",fundingForReviewPeriod:0,fundingSource:"",investigatorName:"",investigatorType:"",projectName:"",projectTotalDuration:0,rejectedReason:"",researchAbstract:"",researchStatus:"",status:"VALID",studentProject:!0,userProfileId:0},fundingSource:["INTRAMURAL","EXTRAMURAL","NON_FUNDED"],investigatorTypes:["PRICIPAL_INVESTIGATORS","CO_INVESTIGATORS"],researchStatus:["COMPLETED","ONGOING","NEW"],approvals:["PENDING","REJECTED","APPROVED"],studentProject:[!0,!1],snackbar:!1,timeout:2e3,submitMessage:"Added sucessfully!"}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(source,!0).forEach(function(t){Object(c.a)(e,t,source[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(source).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))})}return e}({},Object(o.c)({success:function(e){return e.research.researchData.status},researchData:function(e){return e.research.researchData.result},errorData:function(e){return e.research.researchData.error},usersData:function(e){return e.user.userProfile.result},selectedYear:function(e){return e.selectedYear},staffs:function(e){return e.staffs}}),{},Object(o.b)(["studentActivities"]),{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}}),watch:{dialog:function(e){e||this.close()}},fetch:(k=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,n,c,o,l,d=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.store,n=r.state.auth.user.id,e.next=4,r.dispatch("user/setUserProfile",{id:n}).catch(function(e){d.snackbar=!0,d.submitMessage=e});case 4:if(c=r.state.user.userProfile.result.departmentId,o=r.state.user.userProfile.result.userId,l="","ROLE_FACULTY"!==r.state.auth.user.authorities[0]&&"ROLE_STUDENT"!==r.state.auth.user.authorities[0]){e.next=13;break}return l="departmentId.equals=".concat(c,"&userProfileId.equals=").concat(o),e.next=11,r.dispatch("research/setResearchData",{qs:l});case 11:e.next=16;break;case 13:return l="departmentId.equals=".concat(c),e.next=16,r.dispatch("research/setResearchData",{qs:l});case 16:return e.next=18,r.dispatch("setStudentActivties");case 18:case"end":return e.stop()}},e)})),function(e){return k.apply(this,arguments)}),mounted:function(){this.reset(),this.$store.state.selectedYear?this.selectedYear=this.$store.state.selectedYear:this.$router.push("/admin/activities/faculties"),this.annualYear=this.selectedYear},methods:{changeReportingYear:(f=Object(n.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("setReportingYear",this.selectedYear);case 2:case"end":return e.stop()}},e,this)})),function(){return f.apply(this,arguments)}),getColor:function(e){return"REJECTED"===e?"red":"PENDING"===e?"orange":"green"},researchAdd:(m=Object(n.a)(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$refs.form.validate()&&(this.research.annualYear=this.selectedYear,this.research.investigatorName=this.research.investigatorName.join(),0==this.research.userProfileId&&(this.research.userProfileId=this.usersData.userId),this.research.departmentId=this.usersData.departmentId,t=this.research,this.$store.dispatch("research/researchAdd",t).then(function(e){d.a.fire({title:"Success",text:"Added Successfully!",type:"success",showConfirmButton:!1,timer:1500}),r.reset(),r.reloadData()}).catch(function(e){r.snackbar=!0,r.submitMessage=e}));case 1:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)}),reloadData:(h=Object(n.a)(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loading=!0,t=this.$store.state.user.userProfile.result.departmentId,r=this.$store.state.user.userProfile.result.userId,n="","ROLE_FACULTY"!==this.$store.state.auth.user.authorities[0]&&"ROLE_STUDENT"!==this.$store.state.auth.user.authorities[0]){e.next=10;break}return n="departmentId.equals=".concat(t,"&userProfileId.equals=").concat(r,"&annualYear.equals=").concat(this.annualYear),e.next=8,this.$store.dispatch("research/setResearchData",{qs:n});case 8:e.next=13;break;case 10:return n="departmentId.equals=".concat(t,"&annualYear.equals=").concat(this.annualYear),e.next=13,this.$store.dispatch("research/setResearchData",{qs:n});case 13:this.loading=!1;case 14:case"end":return e.stop()}},e,this)})),function(){return h.apply(this,arguments)}),reset:function(){this.$refs.form.reset()},editItem:function(e){this.editedIndex=this.researchData.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){var t=this;this.publicData.indexOf(e);this.deletedItem=Object.assign({},e),this.deletedItem.annualYear=this.deletedItem.annualYear,this.deletedItem.id=this.deletedItem.id,this.deletedItem.status="DELETED";var r=this.deletedItem;console.log(r);confirm("Are you sure you want to delete this item?")&&this.$store.dispatch("public/updatePublic",r).then(function(e){d.a.fire({title:"Success",text:"Deleted Successfully!",type:"success",showConfirmButton:!1,timer:1500}),t.resetForm(),t.reloadData()}).catch(function(e){t.snackbar=!0,t.submitMessage=e})},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.publicData=Object.assign({},e.defaultItem),e.editedIndex=-1},300)},save:function(){var e=this;if(this.editedIndex>-1){this.editedItem.id=this.researchData[this.editedIndex].id,this.editedItem.approvalStatus="PENDING";var t=this.editedItem;this.$store.dispatch("research/updateResearch",t).then(function(t){d.a.fire({title:"Success",text:"Updated Successfully!",type:"success",showConfirmButton:!1,timer:1500}),e.reloadData()}).catch(function(t){e.snackbar=!0,e.submitMessage=t})}else console.log(this.researchData.push(this.editedItem));this.close()}}},x=r(3),component=Object(x.a)(I,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("div",{staticClass:"wrapper-bg",attrs:{id:"sc-page-wrapper"}},[r("div",{attrs:{id:"sc-page-content"}},[r("div",{staticClass:"uk-text-center uk-grid",attrs:{"data-uk-grid":""}},[r("div",{staticClass:"uk-width-auto"},[r("div",{staticClass:"page-title"},[r("h1",{staticClass:"uk-margin-medium-left"},[e._v("\n\t\t\t\t\t\t\tResearch Activities\n\t\t\t\t\t\t")])])]),e._v(" "),r("div",{staticClass:"uk-width-expand@s uk-align-right@s"},[r("div",{staticClass:"uk-align-right",attrs:{"data-uk-form-custom":"target: > * > span:first-child"}},[r("v-select",{staticClass:"text-center",attrs:{items:e.reportYears,"item-text":"val","item-value":"id",label:"Reporing Year",required:""},on:{input:e.changeReportingYear},model:{value:e.selectedYear,callback:function(t){e.selectedYear=t},expression:"selectedYear"}})],1)])]),e._v(" "),r("div",{staticClass:"uk-text-center",attrs:{"uk-grid":""}},[r("div",{staticClass:"uk-width-1-4@s uk-width-1-1"},[r("div",{staticClass:"uk-card uk-card-primary"},[r("ul",{staticClass:"uk-margin-left uk-nav-default uk-nav-parent-icon uk-text-left uk-text-bold uk-padding-small",attrs:{"uk-nav":""}},e._l(e.studentActivities,function(t,n){return r("li",{key:n,staticClass:"uk-padding-small-bottom"},[r("nuxt-link",{staticClass:"uk-text-normal",attrs:{to:t.path}},[r("span",{staticClass:"uk-margin-small-right",attrs:{"uk-icon":t.icon}}),e._v(" "+e._s(t.title)+"\n\t\t\t\t\t\t\t\t")])],1)}),0)])]),e._v(" "),r("div",{staticClass:"uk-width-3-4@s uk-width-1-1"},[r("div",{staticClass:"uk-card uk-card-default uk-card-body uk-text-left"},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12",md:"12"}},["ROLE_DEPARTMENT"===e.$store.state.auth.user.authorities[0]?r("v-select",{attrs:{items:e.staffs,"item-value":"id","item-text":"firstname",filled:"",label:"Data from (Select Student)"},model:{value:e.research.userProfileId,callback:function(t){e.$set(e.research,"userProfileId",t)},expression:"research.userProfileId"}}):e._e()],1)],1),e._v(" "),r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){e.preventDefault()}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{rules:[function(e){return!!e||"Item is required"}],label:"Project Name / Title*",required:""},model:{value:e.research.projectName,callback:function(t){e.$set(e.research,"projectName",t)},expression:"research.projectName"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-select",{attrs:{rules:[function(e){return!!e||"Item is required"}],items:e.investigatorTypes,label:"Investigator Type*"},model:{value:e.research.investigatorType,callback:function(t){e.$set(e.research,"investigatorType",t)},expression:"research.investigatorType"}})],1),e._v(" "),r("v-col",{attrs:{cols:"8"}},[r("v-autocomplete",{attrs:{rules:[function(e){return!!e||"Item is required"}],items:e.staffs,"item-text":"firstname","item-value":"firstname",multiple:"",label:"Name of the Investigator(s)*"},model:{value:e.research.investigatorName,callback:function(t){e.$set(e.research,"investigatorName",t)},expression:"research.investigatorName"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-text-field",{attrs:{rules:[function(e){return!!e||"Item is required"}],label:"Total Duration (in Months)",required:"",type:"number"},model:{value:e.research.projectTotalDuration,callback:function(t){e.$set(e.research,"projectTotalDuration",t)},expression:"research.projectTotalDuration"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-select",{attrs:{rules:[function(e){return!!e||"Item is required"}],items:e.fundingSource,label:"Source of Funding*"},model:{value:e.research.fundingSource,callback:function(t){e.$set(e.research,"fundingSource",t)},expression:"research.fundingSource"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-text-field",{attrs:{rules:[function(e){return!!e||"Item is required"}],label:"Funding Agency*",required:""},model:{value:e.research.fundingAgency,callback:function(t){e.$set(e.research,"fundingAgency",t)},expression:"research.fundingAgency"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-text-field",{attrs:{label:"Total Fund (in Lakhs)*",required:"",type:"number"},model:{value:e.research.currentYearFunding,callback:function(t){e.$set(e.research,"currentYearFunding",t)},expression:"research.currentYearFunding"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-text-field",{attrs:{label:"Funding during the Review Period / Year in lakhs *",required:"",type:"number"},model:{value:e.research.fundingForReviewPeriod,callback:function(t){e.$set(e.research,"fundingForReviewPeriod",t)},expression:"research.fundingForReviewPeriod"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-select",{attrs:{items:e.researchStatus,label:"Research Status"},model:{value:e.research.researchStatus,callback:function(t){e.$set(e.research,"researchStatus",t)},expression:"research.researchStatus"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-select",{attrs:{items:e.studentProject,label:"Student Project?"},model:{value:e.research.studentProject,callback:function(t){e.$set(e.research,"studentProject",t)},expression:"research.studentProject"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-textarea",{attrs:{counter:"",label:"Report / Abstract*",value:e.value},model:{value:e.research.researchAbstract,callback:function(t){e.$set(e.research,"researchAbstract",t)},expression:"research.researchAbstract"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"uk-width-1-1"},[r("div",{staticClass:"uk-width-expand"}),e._v(" "),r("div",{staticClass:"uk-form-controls uk-width-auto uk-align-right"},[r("v-btn",{attrs:{medium:"",color:"#d74f4f",dark:""},on:{click:e.reset}},[e._v("\n\t\t\t\t\t\t\t\t\t\tReset\n\t\t\t\t\t\t\t\t\t")]),e._v(" "),r("v-btn",{attrs:{medium:"",color:"#57a727",dark:""},on:{click:e.researchAdd}},[e._v("\n\t\t\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t\t\t")])],1)])],1),e._v(" "),r("v-snackbar",{attrs:{timeout:e.timeout},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.submitMessage)+"\n\t\t\t\t\t\t\t"),r("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t")])],1)],1)])]),e._v(" "),r("hr"),e._v(" "),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.researchData,"sort-by":"id","sort-desc":"",loading:e.loading,"loading-text":"Loading... Please wait"},scopedSlots:e._u([{key:"item.approvalStatus",fn:function(t){var n=t.item;return[r("v-chip",{attrs:{color:e.getColor(n.approvalStatus),dark:""}},[e._v("\n\t\t\t\t\t\t"+e._s(n.approvalStatus)+"\n\t\t\t\t\t")])]}},{key:"top",fn:function(){return[r("v-toolbar",{staticClass:"d-flex justify mt-4 pt-1",attrs:{flat:"",color:"#ebebeb"}},[r("v-toolbar-title",[r("span",{staticClass:"frm-title"},[e._v("Research Activities")])]),e._v(" "),r("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),r("v-select",{staticClass:"justify-end mt-6",attrs:{items:e.reportYears,"item-text":"val","item-value":"id",label:"Reporing Year",required:""},on:{change:function(t){return e.reloadData()}},model:{value:e.annualYear,callback:function(t){e.annualYear=t},expression:"annualYear"}}),e._v(" "),r("v-spacer"),e._v(" "),r("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-toolbar",{attrs:{dark:"",color:"#4da96b"}},[r("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.dialog=!1}}},[r("v-icon",[e._v("mdi-close")])],1),e._v(" "),r("v-toolbar-title",[e._v("Research Activities | Update Details")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-toolbar-items",[r("v-btn",{attrs:{dark:"",text:""},on:{click:e.close}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\t\t")]),e._v(" "),r("v-btn",{attrs:{dark:"",text:""},on:{click:e.save}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t\t\t\t")])],1)],1),e._v(" "),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Project Name"},model:{value:e.editedItem.projectName,callback:function(t){e.$set(e.editedItem,"projectName",t)},expression:"editedItem.projectName"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-select",{attrs:{items:e.investigatorTypes,label:"Investigator Type"},model:{value:e.editedItem.investigatorType,callback:function(t){e.$set(e.editedItem,"investigatorType",t)},expression:"editedItem.investigatorType"}})],1),e._v(" "),r("v-col",{attrs:{cols:"8"}},[r("v-text-field",{attrs:{label:"Name"},model:{value:e.editedItem.investigatorName,callback:function(t){e.$set(e.editedItem,"investigatorName",t)},expression:"editedItem.investigatorName"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-text-field",{attrs:{label:"Project Duration",type:"number"},model:{value:e.editedItem.projectTotalDuration,callback:function(t){e.$set(e.editedItem,"projectTotalDuration",t)},expression:"editedItem.projectTotalDuration"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-select",{attrs:{items:e.fundingSource,label:"Funding Source"},model:{value:e.editedItem.fundingSource,callback:function(t){e.$set(e.editedItem,"fundingSource",t)},expression:"editedItem.fundingSource"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-text-field",{attrs:{label:"Funding Agency"},model:{value:e.editedItem.fundingAgency,callback:function(t){e.$set(e.editedItem,"fundingAgency",t)},expression:"editedItem.fundingAgency"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-text-field",{attrs:{label:"Total Fund (in lakhs)"},model:{value:e.editedItem.currentYearFunding,callback:function(t){e.$set(e.editedItem,"currentYearFunding",t)},expression:"editedItem.currentYearFunding"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-text-field",{attrs:{label:"Funding during the review period / year"},model:{value:e.editedItem.fundingForReviewPeriod,callback:function(t){e.$set(e.editedItem,"fundingForReviewPeriod",t)},expression:"editedItem.fundingForReviewPeriod"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-select",{attrs:{items:e.researchStatus,label:"Research Status"},model:{value:e.editedItem.researchStatus,callback:function(t){e.$set(e.editedItem,"researchStatus",t)},expression:"editedItem.researchStatus"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-select",{attrs:{items:e.studentProject,label:"Student Project?"},model:{value:e.editedItem.studentProject,callback:function(t){e.$set(e.editedItem,"studentProject",t)},expression:"editedItem.studentProject"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Research Abstract"},model:{value:e.editedItem.researchAbstract,callback:function(t){e.$set(e.editedItem,"researchAbstract",t)},expression:"editedItem.researchAbstract"}})],1)],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var n=t.item;return[r("span",{staticClass:"uk-margin-small-right edit-icon",attrs:{"uk-icon":"pencil"},on:{click:function(t){return e.editItem(n)}}}),e._v(" "),r("span",{staticClass:"delete-icon",attrs:{"uk-icon":"trash"},on:{click:function(t){return e.deleteItem(n)}}})]}},{key:"no-data",fn:function(){return[r("v-btn",{attrs:{color:"primary"}},[e._v("\n\t\t\t\t\t\tReset\n\t\t\t\t\t")])]},proxy:!0}])})],1)])])},[],!1,null,null,null);t.default=component.exports}}]);