(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{491:function(t,e,n){var content=n(500);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("6ff43496",content,!0,{sourceMap:!1})},493:function(t,e,n){var content=n(494);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("beda1088",content,!0,{sourceMap:!1})},494:function(t,e,n){(e=n(14)(!1)).push([t.i,".theme--light.v-input--switch .v-input--switch__thumb{color:#fff}.theme--light.v-input--switch .v-input--switch__track{color:rgba(0,0,0,.38)}.theme--light.v-input--switch.v-input--is-disabled:not(.v-input--is-dirty) .v-input--switch__thumb{color:#fafafa!important}.theme--light.v-input--switch.v-input--is-disabled:not(.v-input--is-dirty) .v-input--switch__track{color:rgba(0,0,0,.12)!important}.theme--dark.v-input--switch .v-input--switch__thumb{color:#bdbdbd}.theme--dark.v-input--switch .v-input--switch__track{color:hsla(0,0%,100%,.3)}.theme--dark.v-input--switch.v-input--is-disabled:not(.v-input--is-dirty) .v-input--switch__thumb{color:#424242!important}.theme--dark.v-input--switch.v-input--is-disabled:not(.v-input--is-dirty) .v-input--switch__track{color:hsla(0,0%,100%,.1)!important}.v-input--switch__thumb,.v-input--switch__track{background-color:currentColor;pointer-events:none;transition:inherit}.v-input--switch__track{border-radius:8px;width:36px;height:14px;left:2px;position:absolute;opacity:.6;right:2px;top:calc(50% - 7px)}.v-input--switch__thumb{border-radius:50%;top:calc(50% - 10px);height:20px;position:relative;width:20px;display:flex;justify-content:center;align-items:center;transition:.3s cubic-bezier(.25,.8,.5,1)}.v-input--switch .v-input--selection-controls__input{width:38px}.v-input--switch .v-input--selection-controls__ripple{top:calc(50% - 24px)}.v-input--switch.v-input--dense .v-input--switch__thumb{width:18px;height:18px}.v-input--switch.v-input--dense .v-input--switch__track{height:12px;width:32px}.v-input--switch.v-input--dense.v-input--switch--inset .v-input--switch__track{height:22px;width:44px;top:calc(50% - 12px);left:-3px}.v-input--switch.v-input--dense .v-input--selection-controls__ripple{top:calc(50% - 22px)}.v-input--switch.v-input--is-dirty.v-input--is-disabled{opacity:.6}.v-application--is-ltr .v-input--switch .v-input--selection-controls__ripple{left:-14px}.v-application--is-ltr .v-input--switch.v-input--dense .v-input--selection-controls__ripple{left:-12px}.v-application--is-ltr .v-input--switch.v-input--is-dirty .v-input--selection-controls__ripple,.v-application--is-ltr .v-input--switch.v-input--is-dirty .v-input--switch__thumb{transform:translate(20px)}.v-application--is-rtl .v-input--switch .v-input--selection-controls__ripple{right:-14px}.v-application--is-rtl .v-input--switch.v-input--dense .v-input--selection-controls__ripple{right:-12px}.v-application--is-rtl .v-input--switch.v-input--is-dirty .v-input--selection-controls__ripple,.v-application--is-rtl .v-input--switch.v-input--is-dirty .v-input--switch__thumb{transform:translate(-20px)}.v-input--switch:not(.v-input--switch--flat):not(.v-input--switch--inset) .v-input--switch__thumb{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.v-input--switch--inset .v-input--selection-controls__input,.v-input--switch--inset .v-input--switch__track{width:48px}.v-input--switch--inset .v-input--switch__track{border-radius:14px;height:28px;left:-4px;opacity:.32;top:calc(50% - 14px)}.v-application--is-ltr .v-input--switch--inset .v-input--selection-controls__ripple,.v-application--is-ltr .v-input--switch--inset .v-input--switch__thumb{transform:translate(0)!important}.v-application--is-rtl .v-input--switch--inset .v-input--selection-controls__ripple,.v-application--is-rtl .v-input--switch--inset .v-input--switch__thumb{transform:translate(-6px)!important}.v-application--is-ltr .v-input--switch--inset.v-input--is-dirty .v-input--selection-controls__ripple,.v-application--is-ltr .v-input--switch--inset.v-input--is-dirty .v-input--switch__thumb{transform:translate(20px)!important}.v-application--is-rtl .v-input--switch--inset.v-input--is-dirty .v-input--selection-controls__ripple,.v-application--is-rtl .v-input--switch--inset.v-input--is-dirty .v-input--switch__thumb{transform:translate(-26px)!important}",""]),t.exports=e},499:function(t,e,n){"use strict";var r=n(491);n.n(r).a},500:function(t,e,n){(e=n(14)(!1)).push([t.i,".disp[data-v-5d5b0249]{font-size:15px}.disp[data-v-5d5b0249],.disp-icon[data-v-5d5b0249]{color:#fff;font-weight:400}.disp-icon[data-v-5d5b0249]{font-size:24px}",""]),t.exports=e},503:function(t,e,n){"use strict";n(17),n(12),n(9),n(7),n(13),n(20);var r=n(0),o=n(4),c=n(66);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var d={computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.b)(["activities"])),mounted:function(){return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}},v=(n(499),n(42)),m=n(47),f=n.n(m),h=n(98),_=n(200),y=n(120),w=n(36),x=n(204),k=n(108),component=Object(v.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list",{staticStyle:{"border-radius":"0"},attrs:{flat:"",color:"#41704e"}},[n("v-list-item-group",{attrs:{color:"#ffde00"}},t._l(t.activities,(function(e,i){return n("v-list-item",{key:i,attrs:{to:e.path}},[n("v-list-item-icon",{staticClass:"pl-2 mr-3"},[n("v-icon",{staticClass:"disp-icon",domProps:{textContent:t._s(e.icon)}})],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",{staticClass:"disp",domProps:{textContent:t._s(e.title)}})],1)],1)})),1)],1)}),[],!1,null,"5d5b0249",null);e.a=component.exports;f()(component,{VIcon:h.a,VList:_.a,VListItem:y.a,VListItemContent:w.a,VListItemGroup:x.a,VListItemIcon:k.a,VListItemTitle:w.c})},504:function(t,e,n){"use strict";n(20);var r=n(0),o=n(31),c=n.n(o),l={data:function(){return{dialog:!1,show:!1,newUser:{username:"",fullname:"",email:"",password:"",userType:"",department:0,confirmed:!0,blocked:!1},userTypes:[{text:"Faculty / Staff",value:"FACULTY"},{text:"Student",value:"STUDENT"}],userType:null}},mounted:function(){return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{addUser:function(){var t=this;this.newUser.department=this.$store.state.auth.user.department,this.newUser.password="changemenow",this.newUser.username=this.newUser.email,this.userType=this.newUser.userType;var e=this.newUser;this.$store.dispatch("user/addUser",e).then((function(e){console.log(e),c.a.fire({title:"Added",text:"This account credentials should be given to the respective faculy / staff.",icon:"success",showConfirmButton:!1,timer:1500}),t.dialog=!1,"STUDENT"===t.userType?t.$emit("new-student"):t.$emit("new-user"),console.log("emitting....")})).catch((function(t){}))}}},d=n(42),v=n(47),m=n.n(v),f=n(110),h=n(97),_=n(26),y=n(471),w=n(266),x=n(98),k=n(472),O=n(475),T=n(274),E=n(511),I=n(72),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("v-dialog",{attrs:{persistent:"","max-width":"50%"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({staticClass:"mt-4",attrs:{"x-small":"",color:"amber darken-4",fab:"",dark:""}},r),[n("v-icon",[t._v("mdi-account-plus")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("Add New User")]),n("br"),t._v(" "),n("span",{staticClass:"caption font-weight-light"},[t._v("This credentials can be given to the respective faculty / student for their use of this application."),n("br"),t._v("The default "),n("b",[t._v("PASSWORD")]),t._v(" is: changemenow")])]),t._v(" "),n("v-card-text",[n("v-row",[n("v-col",{attrs:{cols:"4"}},[n("v-select",{attrs:{color:"green",label:"User Type",required:"",outlined:"",items:t.userTypes,"prepend-inner-icon":"mdi-account-question"},model:{value:t.newUser.userType,callback:function(e){t.$set(t.newUser,"userType",e)},expression:"newUser.userType"}})],1),t._v(" "),n("v-col",{attrs:{cols:"8"}},[n("v-text-field",{attrs:{color:"green",label:"Full Name",outlined:"",hint:"Ex: Mr. Mighty Joe",rules:[function(t){return!!t||"Please Enter User's Full Name"}],"prepend-inner-icon":"mdi-account-settings"},model:{value:t.newUser.fullname,callback:function(e){t.$set(t.newUser,"fullname",e)},expression:"newUser.fullname"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{color:"green",label:"Email ID",required:"",hint:"Also your primary Login ID",outlined:"",rules:[function(t){return!!t||"Please enter email"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],"prepend-inner-icon":"email"},model:{value:t.newUser.email,callback:function(e){t.$set(t.newUser,"email",e)},expression:"newUser.email"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{color:"green",rules:[function(t){return!!t||"Password is Required"}],"append-icon":t.show?"mdi-eye":"mdi-eye-off",type:t.show?"text":"password",label:"Password",value:"changemenow"},on:{"click:append":function(e){t.show=!t.show}}})],1),t._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-switch",{staticClass:"pl-2",attrs:{color:"red darken-3",label:"Blocked"}})],1)],1)],1),t._v(" "),n("v-card-actions",{staticClass:"pr-5"},[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"green darken-1",small:"",dark:""},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),t._v(" "),n("v-btn",{attrs:{color:"green darken-1",small:"",dark:""},on:{click:t.addUser}},[n("v-icon",{staticClass:"pr-2",attrs:{small:""}},[t._v("mdi-account-plus")]),t._v("Create\n          Account")],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.a=component.exports;m()(component,{VBtn:f.a,VCard:h.a,VCardActions:_.a,VCardText:_.b,VCardTitle:_.c,VCol:y.a,VDialog:w.a,VIcon:x.a,VRow:k.a,VSelect:O.a,VSpacer:T.a,VSwitch:E.a,VTextField:I.a})},511:function(t,e,n){"use strict";n(17),n(12),n(9),n(7),n(13);var r=n(4),o=(n(279),n(493),n(220)),c=n(51),l=n(219),d=n(91),v=n(171),m=n(1);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=o.a.extend({name:"v-switch",directives:{Touch:l.a},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return h({},c.a.options.computed.classes.call(this),{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.disabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",h({},this.attrs,{},this.attrs$)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",h({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",h({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(d.c,{},[!1===this.loading?null:this.$slots.progress||this.$createElement(v.a,{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(t){(t.keyCode===m.v.left&&this.isActive||t.keyCode===m.v.right&&!this.isActive)&&this.onChange()}}})},512:function(t,e,n){"use strict";var r=n(100),o=n(33),c=n(8),l=n(11);e.a=Object(c.a)(r.a,o.a).extend({name:"v-hover",props:{disabled:{type:Boolean,default:!1},value:{type:Boolean,default:void 0}},methods:{onMouseEnter:function(){this.runDelay("open")},onMouseLeave:function(){this.runDelay("close")}},render:function(){return this.$scopedSlots.default||void 0!==this.value?(this.$scopedSlots.default&&(element=this.$scopedSlots.default({hover:this.isActive})),Array.isArray(element)&&1===element.length&&(element=element[0]),element&&!Array.isArray(element)&&element.tag?(this.disabled||(element.data=element.data||{},this._g(element.data,{mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})),element):(Object(l.c)("v-hover should only contain a single element",this),element)):(Object(l.c)("v-hover is missing a default scopedSlot or bound value",this),null);var element}})},568:function(t,e,n){var content=n(713);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("01f66161",content,!0,{sourceMap:!1})},569:function(t,e,n){var content=n(715);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("24161c95",content,!0,{sourceMap:!1})},712:function(t,e,n){"use strict";var r=n(568);n.n(r).a},713:function(t,e,n){(e=n(14)(!1)).push([t.i,".frm-title[data-v-916ab4e8]{border-left:5px solid #e16949;padding:3px 10px}",""]),t.exports=e},714:function(t,e,n){"use strict";var r=n(569);n.n(r).a},715:function(t,e,n){(e=n(14)(!1)).push([t.i,".cust-icon[data-v-9dba5658]{font-size:20px;color:#ff7e00;padding-right:10px}.disp[data-v-9dba5658]{font-size:15px}.disp[data-v-9dba5658],.disp-icon[data-v-9dba5658]{color:#fff;font-weight:400}.disp-icon[data-v-9dba5658]{font-size:24px}",""]),t.exports=e},811:function(t,e,n){"use strict";n.r(e);n(17),n(12),n(9),n(7),n(13),n(20);var r=n(0),o=n(4),c=n(66),l=n(132),d=n(503),v=n(214),m=n(31),f=n.n(m),h={props:["dataFrom"],components:{AddUser:n(504).a},data:function(){return{imgLoader:!1,loading:!1,date:!1,valid:!0,publicEngagement:{annual_year:0,type:"",faculty_name:"",title:"",program_name:"",target_audience:"",date:"",place:"",approval_status:"Pending",approved_by:null,approved_date:null,deleted:!1,department:0,image:null,user:0},activityTypes:["Public_Lecture","Mass_Media","Others"],selectedFile:null,image_url:null}},methods:{getLatestUsers:function(){console.log("recieving....");var t;t="department.id=".concat(this.$store.state.auth.user.department,"&userType=FACULTY&blocked_ne=true"),this.$store.dispatch("setStaffs",{qs:t}),this.dataFrom=this.$store.state.staffs},getLatestStudents:function(){console.log("recieving...");var t;t="department.id=".concat(this.$store.state.auth.user.department,"&userType=STUDENT&blocked_ne=true"),this.$store.dispatch("setStudents",{qs:t}),this.dataFrom=this.$store.state.students},reset:function(){this.$refs.form.reset(),this.image_url=null},publicAdd:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$refs.form.validate()&&(t.publicEngagement.annual_year=t.$store.state.selectedYear,"DEPARTMENT"!==t.$store.state.auth.user.userType&&(t.publicEngagement.user=t.$auth.user.id),t.publicEngagement.department=t.$store.state.auth.user.department,"DEPARTMENT"===t.$store.state.auth.user.userType&&(n=new Date,t.publicEngagement.approval_status="Approved",t.publicEngagement.approved_date=t.$moment(n).format()),r=t.publicEngagement,t.$store.dispatch("public/publicAdd",r).then((function(e){f.a.fire({title:"Success",text:"Added Successfully!",icon:"success",showConfirmButton:!1,timer:1500}),t.reset()})).catch((function(t){f.a.fire("Something Wrong!")})));case 1:case"end":return e.stop()}}),e)})))()},handleFileUpload:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var data,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.imgLoader=!0,e.selectedFile=t.target.files[0],(data=new FormData).append("files",e.selectedFile),n.next=6,e.$axios({method:"POST",url:"/upload",data:data});case 6:r=n.sent,e.image_url=r.data[0].url,e.publicEngagement.image=r.data[0].id,e.imgLoader=!1;case 10:case"end":return n.stop()}}),n)})))()}}},_=n(42),y=n(47),w=n.n(y),x=n(110),k=n(471),O=n(805),T=n(91),E=n(488),I=n(512),$=n(127),j=n(206),P=n(195),C=n(194),S=n(472),D=n(475),V=n(274),A=n(72),component=Object(_.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-row",[n("v-col",{attrs:{cols:"12",md:"12"}},[n("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){t.preventDefault()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},["DEPARTMENT"===t.$auth.user.userType?n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"11",lg:"11"}},[n("v-select",{attrs:{items:t.dataFrom,"item-value":"id","item-text":"fullname",label:"Data received from?",placeholder:"Select Faculty / Staff from the List",color:"success",rules:[function(t){return!!t||"Selecting the Faculty / Staff is Required"}]},model:{value:t.publicEngagement.user,callback:function(e){t.$set(t.publicEngagement,"user",e)},expression:"publicEngagement.user"}})],1),t._v(" "),n("v-col",{attrs:{cols:"1",lg:"1",sm:"1"}},[n("AddUser",{on:{"new-user":function(e){return t.getLatestUsers()},"new-student":function(e){return t.getLatestStudents()}}})],1)],1):t._e(),t._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{rules:[function(t){return!!t||"Item is required"}],label:"Name of the Faculty",color:"success"},model:{value:t.publicEngagement.faculty_name,callback:function(e){t.$set(t.publicEngagement,"faculty_name",e)},expression:"publicEngagement.faculty_name"}})],1),t._v(" "),n("v-col",{attrs:{cols:"3"}},[n("v-select",{attrs:{rules:[function(t){return!!t||"Item is required"}],items:t.activityTypes,label:"Type of Activity",color:"success"},model:{value:t.publicEngagement.type,callback:function(e){t.$set(t.publicEngagement,"type",e)},expression:"publicEngagement.type"}})],1),t._v(" "),"Others"!==t.publicEngagement.type?n("v-col",{attrs:{cols:"9"}},[n("v-text-field",{attrs:{rules:[function(t){return!!t||"Item is required"}],label:"If others please specify",required:"",disabled:"",color:"success"},model:{value:t.publicEngagement.program_name,callback:function(e){t.$set(t.publicEngagement,"program_name",e)},expression:"publicEngagement.program_name"}})],1):n("v-col",{attrs:{cols:"9"}},[n("v-text-field",{attrs:{rules:[function(t){return!!t||"Item is required"}],label:"If others please specify",required:"",color:"success"},model:{value:t.publicEngagement.program_name,callback:function(e){t.$set(t.publicEngagement,"program_name",e)},expression:"publicEngagement.program_name"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{rules:[function(t){return!!t||"Item is required"}],label:"Title",required:"",color:"success"},model:{value:t.publicEngagement.title,callback:function(e){t.$set(t.publicEngagement,"title",e)},expression:"publicEngagement.title"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},["Others"!==t.publicEngagement.type?n("v-text-field",{attrs:{rules:[function(t){return!!t||"Item is required"}],label:"Programme Name",required:"",color:"success"},model:{value:t.publicEngagement.program_name,callback:function(e){t.$set(t.publicEngagement,"program_name",e)},expression:"publicEngagement.program_name"}}):t._e()],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{rules:[function(t){return!!t||"Item is required"}],label:"Target Audience",required:"",color:"success"},model:{value:t.publicEngagement.target_audience,callback:function(e){t.$set(t.publicEngagement,"target_audience",e)},expression:"publicEngagement.target_audience"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-text-field",t._g({attrs:{"return-value":t.date,rules:[function(t){return!!t||"Item is required"}],readonly:"",color:"success",label:"Date"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},model:{value:t.publicEngagement.date,callback:function(e){t.$set(t.publicEngagement,"date",e)},expression:"publicEngagement.date"}},r))]}}]),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[t._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.publicEngagement.date,callback:function(e){t.$set(t.publicEngagement,"date",e)},expression:"publicEngagement.date"}},[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:""},on:{click:function(e){t.date=!1}}},[t._v("\n                  Cancel\n                ")]),t._v(" "),n("v-btn",{attrs:{text:""},on:{click:function(e){return t.$refs.menu.save(t.date)}}},[t._v("\n                  OK\n                ")])],1)],1)],1),t._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{rules:[function(t){return!!t||"Item is required"}],label:"Place",required:"",color:"success"},model:{value:t.publicEngagement.place,callback:function(e){t.$set(t.publicEngagement,"place",e)},expression:"publicEngagement.place"}})],1)],1),t._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",lg:"4"}},[n("h3",[n("span",{staticClass:"frm-title"},[t._v("Upload Images (If any)")])]),t._v(" "),n("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[n("v-img",{staticClass:"mt-3",attrs:{src:t.image_url?""+t.$axios.defaults.baseURL+t.image_url:"/image_placeholder.png","lazy-src":"/image_placeholder.png","max-width":"100%","max-height":"175"}},[n("v-progress-linear",{attrs:{active:t.imgLoader,indeterminate:t.imgLoader,absolute:"",bottom:"",color:"deep-purple accent-4"}}),t._v(" "),n("v-fade-transition",[r?n("v-overlay",{attrs:{absolute:"",color:"#00564c"}},[n("v-btn",{on:{click:function(e){return t.$refs.image.click()}}},[t._v("\n                        Upload Image\n                      ")])],1):t._e()],1)],1)]}}])}),t._v(" "),n("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",label:"File input"},on:{change:t.handleFileUpload}})],1)],1)],1)],1)],1),t._v(" "),n("v-row",[n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"mr-4",attrs:{small:"",color:"#d74f4f",dark:""},on:{click:t.reset}},[t._v("\n      Reset\n    ")]),t._v(" "),n("v-btn",{staticClass:"mr-4",attrs:{small:"",color:"#57a727",dark:""},on:{click:t.publicAdd}},[t._v("\n      Submit\n    ")])],1)],1)}),[],!1,null,null,null),R=component.exports;w()(component,{VBtn:x.a,VCol:k.a,VDatePicker:O.a,VFadeTransition:T.d,VForm:E.a,VHover:I.a,VImg:$.a,VMenu:j.a,VOverlay:P.a,VProgressLinear:C.a,VRow:S.a,VSelect:D.a,VSpacer:V.a,VTextField:A.a});function F(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var U={props:["reportYears"],data:function(){return{loading:!1,dialog:!1,annualYear:0,headers:[{text:"Last updated",align:"left",value:"updated_at"},{text:"Activity Type",value:"type"},{text:"Faculty / Author Name",value:"faculty_name"},{text:"Title",value:"title"},{text:"Program Name",value:"program_name"},{text:"Target Audience",value:"target_audience"},{text:"Date",value:"date"},{text:"Place",value:"place"},{text:"Approval Status",value:"approval_status"},{text:"Actions",value:"action",sortable:!1}],coAuthors:[],editedItem:{annual_year:0,type:"",faculty_name:"",title:"",program_name:"",target_audience:"",date:"",place:"",approval_status:"Pending",approved_by:null,approved_date:null,deleted:!1,department:0,user:0,image:null,rejected_reason:null},image_url:"/image_placeholder.png",selectedFile:null,deletedItem:{annual_year:0,type:"",faculty_name:"",title:"",program_name:"",target_audience:"",date:"",place:"",approval_status:"Pending",approved_by:null,approved_date:null,deleted:!1,department:0,user:0,image:null,rejected_reason:null},imageToDelete:null,activityTypes:["Public_Lecture","Mass_Media","Others"]}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?F(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):F(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.c)({publicData:function(t){return t.public.publicData.result},staffs:function(t){return t.staffs}})),watch:{dialog:function(t){t||this.close()}},fetch:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.store,o="","FACULTY"!==r.state.auth.user.userType&&"STUDENT"!==r.state.auth.user.userType){n.next=8;break}return o="department.id=".concat(r.state.auth.user.department,"&user.id=").concat(e.$auth.user.id,"&annual_year=").concat(r.state.selectedYear,"&deleted_ne=true"),n.next=6,r.dispatch("public/setPublicData",{qs:o});case 6:n.next=11;break;case 8:return o="department.id=".concat(r.state.auth.user.department,"&annual_year=").concat(r.state.selectedYear,"&deleted_ne=true"),n.next=11,r.dispatch("public/setPublicData",{qs:o});case 11:case"end":return n.stop()}}),n)})))()},mounted:function(){this.annualYear=this.$store.state.selectedYear,this.reloadData()},methods:{handleclick:function(t){var e=this.publicData.indexOf(t);"Rejected"===t.approval_status&&f.a.fire({title:"Reason for Rejection",text:this.publicData[e].rejected_reason})},handleFileUpload:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var data,r,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(e.image_url),void 0===e.image_url){n.next=13;break}return e.imageToDelete=e.editedItem.image.id,e.selectedFile=t.target.files[0],(data=new FormData).append("files",e.selectedFile),n.next=8,e.$axios({method:"POST",url:"/upload",data:data});case 8:r=n.sent,e.image_url=r.data[0].url,e.editedItem.image=r.data[0].id,n.next=22;break;case 13:return e.editedItem.image=null,e.selectedFile=t.target.files[0],(o=new FormData).append("files",e.selectedFile),n.next=19,e.$axios({method:"POST",url:"/upload",data:o});case 19:c=n.sent,e.image_url=c.data[0].url,e.editedItem.image=c.data[0].id;case 22:case"end":return n.stop()}}),n)})))()},getColor:function(t){return"Rejected"===t?"red":"Pending"===t?"orange":"green"},editItem:function(t){this.editedIndex=this.publicData.indexOf(t),this.editedItem=Object.assign({},t),this.editedItem.image?this.image_url=this.editedItem.image.url:this.editedItem.image=0,this.dialog=!0},deleteItem:function(t){var e=this;this.deletedItem=Object.assign({},{id:t.id,deleted:t.deleted}),this.deletedItem.deleted=!0;var n=this.deletedItem;f.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(t){t.value&&(e.loading=!0,e.$store.dispatch("public/updatePublic",n).then((function(t){e.loading=!1,f.a.fire({title:"Success",text:"Deleted Successfully!",icon:"success",showConfirmButton:!1,timer:1500}),e.reloadData()})),f.a.fire({title:"Something Wrong!",text:err,icon:"warning",showConfirmButton:!1,timer:4500}))}))},reloadData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.loading=!0,"FACULTY"!==t.$store.state.auth.user.userType&&"STUDENT"!==t.$store.state.auth.user.userType){e.next=8;break}return"",n="department.id=".concat(t.$auth.user.department,"&user.id=").concat(t.$auth.user.id,"&deleted_ne=true&annual_year=").concat(t.annualYear),e.next=6,t.$store.dispatch("public/setPublicData",{qs:n});case 6:e.next=12;break;case 8:return"",r="department.id=".concat(t.$auth.user.department,"&annual_year=").concat(t.annualYear,"&deleted_ne=true"),e.next=12,t.$store.dispatch("public/setPublicData",{qs:r});case 12:t.loading=!1;case 13:case"end":return e.stop()}}),e)})))()},close:function(){this.dialog=!1,this.image_url="/image_placeholder.png"},save:function(){var t=this;if(this.editedIndex>-1){"DEPARTMENT"===this.$auth.user.userType?this.editedItem.approval_status="Approved":this.editedItem.approval_status="Pending",this.editedItem.user=this.editedItem.user.id,this.editedItem.department=this.editedItem.department.id;var e=this.editedItem;console.log(e),this.$store.dispatch("public/updatePublic",e).then((function(e){f.a.fire({title:"Success",text:"Updated Successfully!",icon:"success",showConfirmButton:!1,timer:1500}),t.imageToDelete&&(t.$store.dispatch("deleteFile",{id:t.imageToDelete}),t.imageToDelete=null),t.reloadData()})).catch((function(t){f.a.fire({title:"Something Wrong!",text:t,icon:"warning",showConfirmButton:!1,timer:4500})}))}this.close()}}},Y=(n(712),n(97)),L=n(26),M=n(205),B=n(483),N=n(823),z=n(266),H=n(198),W=n(98),J=n(171),K=n(60),G=n(99),Q=n(473),X=Object(_.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.publicData,"sort-by":"updated_at","sort-desc":"",loading:t.loading,"loading-text":"Loading... Please wait"},scopedSlots:t._u([{key:"item.updated_at",fn:function(e){var n=e.item;return[t._v("\n      "+t._s(t.$moment(n.updated_at).fromNow())+"\n    ")]}},{key:"item.approval_status",fn:function(e){var r=e.item;return[n("v-chip",{attrs:{color:t.getColor(r.approval_status),dark:""},on:{click:function(e){return t.handleclick(r)}}},[t._v("\n        "+t._s(r.approval_status)+"\n      ")])]}},{key:"top",fn:function(){return[n("v-toolbar",{staticClass:"d-flex justify mt-4 pt-1",staticStyle:{"border-radius":"0"},attrs:{flat:"",color:"#ebebeb"}},[n("v-toolbar-title",[n("span",{staticClass:"frm-title"},[t._v("Public Engagement & Outreach Activities")])]),t._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t._v(" "),n("v-select",{staticClass:"justify-end mt-6",attrs:{items:t.reportYears,"item-text":"val","item-value":"id",label:"Reporting Year",required:"",color:"success"},on:{change:function(e){return t.reloadData()}},model:{value:t.annualYear,callback:function(e){t.annualYear=e},expression:"annualYear"}}),t._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t._v(" "),n("v-tooltip",{attrs:{right:"",color:"blue-grey darken-2"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({attrs:{"x-small":"",fab:"",color:"green",dark:""},on:{click:t.reloadData}},r),[n("v-icon",[t._v("mdi-reload")])],1)]}}])},[t._v(" "),n("span",[t._v("Reload Data")])]),t._v(" "),n("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-toolbar",{attrs:{dark:"",color:"#41704e"}},[n("v-btn",{attrs:{icon:"",dark:""},on:{click:t.close}},[n("v-icon",[t._v("mdi-close")])],1),t._v(" "),n("v-toolbar-title",[t._v("Public Engagement & Outreach Activities")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{dark:"",text:""},on:{click:t.close}},[t._v("\n                  Cancel\n                ")]),t._v(" "),n("v-btn",{attrs:{dark:"",text:""},on:{click:t.save}},[t._v("\n                  Save\n                ")])],1)],1),t._v(" "),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Name of the Faculty",color:"success"},model:{value:t.editedItem.faculty_name,callback:function(e){t.$set(t.editedItem,"faculty_name",e)},expression:"editedItem.faculty_name"}})],1),t._v(" "),n("v-col",{attrs:{cols:"3"}},[n("v-select",{attrs:{items:t.activityTypes,label:"Type of Activity",readonly:"",color:"success"},model:{value:t.editedItem.type,callback:function(e){t.$set(t.editedItem,"type",e)},expression:"editedItem.type"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Title",color:"success"},model:{value:t.editedItem.title,callback:function(e){t.$set(t.editedItem,"title",e)},expression:"editedItem.title"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Programme Name",color:"success"},model:{value:t.editedItem.program_name,callback:function(e){t.$set(t.editedItem,"program_name",e)},expression:"editedItem.program_name"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Target Audience",color:"success"},model:{value:t.editedItem.target_audience,callback:function(e){t.$set(t.editedItem,"target_audience",e)},expression:"editedItem.target_audience"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-text-field",t._g({attrs:{"return-value":t.date,rules:[function(t){return!!t||"Item is required"}],readonly:"",color:"success",label:"Date"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},model:{value:t.editedItem.date,callback:function(e){t.$set(t.editedItem,"date",e)},expression:"editedItem.date"}},r))]}}]),model:{value:t.editDate,callback:function(e){t.editDate=e},expression:"editDate"}},[t._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.editedItem.date,callback:function(e){t.$set(t.editedItem,"date",e)},expression:"editedItem.date"}},[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:""},on:{click:function(e){t.date=!1}}},[t._v("\n                          Cancel\n                        ")]),t._v(" "),n("v-btn",{attrs:{text:""},on:{click:function(e){return t.$refs.menu.save(t.editDate)}}},[t._v("\n                          OK\n                        ")])],1)],1)],1),t._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Place",color:"success"},model:{value:t.editedItem.place,callback:function(e){t.$set(t.editedItem,"place",e)},expression:"editedItem.place"}})],1)],1),t._v(" "),n("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[n("v-img",{staticClass:"grey lighten-2",attrs:{src:"/image_placeholder.png"===t.image_url?"/image_placeholder.png":""+t.$axios.defaults.baseURL+t.image_url,"lazy-src":"/image_placeholder.png","aspect-ratio":"1","max-width":"100%","max-height":"400"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[n("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)},[t._v(" "),n("v-fade-transition",[r?n("v-overlay",{attrs:{absolute:"",color:"#036358"}},[n("v-btn",{on:{click:function(e){return t.$refs.image.click()}}},[t._v("\n                            "+t._s(t.image_url?"Edit Image":"Upload Image")+"\n                          ")])],1):t._e()],1)],1)]}}])}),t._v(" "),n("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",label:"File input"},on:{change:t.handleFileUpload}})],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(e){var r=e.item;return[n("v-icon",{attrs:{centre:"",color:"green"},on:{click:function(e){return t.editItem(r)}}},[t._v("mdi-pencil-box")]),t._v(" "),n("v-icon",{attrs:{centre:"",color:"error"},on:{click:function(e){return t.deleteItem(r)}}},[t._v("mdi-delete-circle")])]}}])})],1)}),[],!1,null,"916ab4e8",null),Z=X.exports;function tt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}w()(X,{VBtn:x.a,VCard:Y.a,VCardText:L.b,VChip:M.a,VCol:k.a,VContainer:B.a,VDataTable:N.a,VDatePicker:O.a,VDialog:z.a,VDivider:H.a,VFadeTransition:T.d,VHover:I.a,VIcon:W.a,VImg:$.a,VMenu:j.a,VOverlay:P.a,VProgressCircular:J.a,VRow:S.a,VSelect:D.a,VSpacer:V.a,VTextField:A.a,VToolbar:K.a,VToolbarItems:G.a,VToolbarTitle:G.b,VTooltip:Q.a});var et={head:function(){return{title:"Public Engagement & Outreach Activities"}},components:{PageHeader:l.a,FacultyActivities:d.a,YearDialog:v.a,PublicForm:R,PublicTable:Z},data:function(){return{selectedYear:0}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?tt(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):tt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.c)({staffs:function(t){return t.staffs}}),{reportYears:function(){return this.$store.state.reportYears}}),fetch:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.next=3,n.dispatch("setActivities");case 3:return"",r="department.id=".concat(n.state.auth.user.department,"&userType=FACULTY&blocked_ne=true"),e.next=7,n.dispatch("setStaffs",{qs:r});case 7:case"end":return e.stop()}}),e)})))()},methods:{changeReportingYear:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("setReportingYear",t.selectedYear);case 2:case"end":return e.stop()}}),e)})))()},setReportingYear:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("setReportingYear",t.selectedYear);case 2:case"end":return e.stop()}}),e)})))()}}},at=(n(714),n(795)),nt=n(850),it=n(827),st=Object(_.a)(et,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-tabs",{attrs:{flat:"","background-color":"#323232",color:"#6ac447",dark:""}},[n("v-tab",[n("span",{staticClass:"mdi mdi-note-outline cust-icon"}),t._v("\n      Activities & Resources\n    ")]),t._v(" "),n("v-tab",[n("span",{staticClass:"mdi mdi-table cust-icon"}),t._v("\n      Records\n    ")]),t._v(" "),n("v-tab-item",[n("v-card",{attrs:{tile:""}},[n("v-card-text",[n("PageHeader",{staticClass:"ml-0 pb-0 pt-0",attrs:{title:t.$metaInfo.title,reportYears:t.reportYears},on:{"set-year":t.setReportingYear}}),t._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:"3",lg:"3"}},[n("v-card",{staticClass:"mx-auto"},[n("FacultyActivities")],1)],1),t._v(" "),n("v-col",{attrs:{cols:"12",md:"9",lg:"9"}},[n("PublicForm",{attrs:{dataFrom:t.staffs,section:"Select Faculty / Staff from the list"}})],1)],1)],1)],1)],1),t._v(" "),n("v-tab-item",[n("v-card",{attrs:{flat:""}},[n("v-card-text",{staticClass:"px-0 py-1"},[n("v-row",[n("v-col",{attrs:{cols:"12",md:"12"}},[n("PublicTable",{attrs:{reportYears:t.reportYears}})],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"9dba5658",null);e.default=st.exports;w()(st,{VCard:Y.a,VCardText:L.b,VCol:k.a,VRow:S.a,VTab:at.a,VTabItem:nt.a,VTabs:it.a})}}]);