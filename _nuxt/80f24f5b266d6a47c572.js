(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{512:function(t,e,n){"use strict";var r=n(100),l=n(33),o=n(8),c=n(11);e.a=Object(o.a)(r.a,l.a).extend({name:"v-hover",props:{disabled:{type:Boolean,default:!1},value:{type:Boolean,default:void 0}},methods:{onMouseEnter:function(){this.runDelay("open")},onMouseLeave:function(){this.runDelay("close")}},render:function(){return this.$scopedSlots.default||void 0!==this.value?(this.$scopedSlots.default&&(element=this.$scopedSlots.default({hover:this.isActive})),Array.isArray(element)&&1===element.length&&(element=element[0]),element&&!Array.isArray(element)&&element.tag?(this.disabled||(element.data=element.data||{},this._g(element.data,{mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})),element):(Object(c.c)("v-hover should only contain a single element",this),element)):(Object(c.c)("v-hover is missing a default scopedSlot or bound value",this),null);var element}})},554:function(t,e,n){var content=n(685);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("a1994788",content,!0,{sourceMap:!1})},555:function(t,e,n){var content=n(687);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("7bdff913",content,!0,{sourceMap:!1})},684:function(t,e,n){"use strict";var r=n(554);n.n(r).a},685:function(t,e,n){(e=n(14)(!1)).push([t.i,".frm-title[data-v-09bed185]{border-left:5px solid #e16949;padding:3px 10px}",""]),t.exports=e},686:function(t,e,n){"use strict";var r=n(555);n.n(r).a},687:function(t,e,n){(e=n(14)(!1)).push([t.i,".cust-icon[data-v-c4979820]{font-size:20px;color:#ff7e00;padding-right:10px}.disp[data-v-c4979820]{font-size:15px}.disp[data-v-c4979820],.disp-icon[data-v-c4979820]{color:#fff;font-weight:400}.disp-icon[data-v-c4979820]{font-size:24px}",""]),t.exports=e},807:function(t,e,n){"use strict";n.r(e);n(20);var r=n(0),l=n(132),o=n(214),c=n(66),d=n(31),v=n.n(d),f={data:function(){return{imgLoader:!1,duration_from:!1,valid:!1,faculty:{annual_year:0,faculty_status:"",faculty_name:"",designation:"",leaving_date:"",deleted:!1,department:0,image:null},selectedFile:null,image_url:null,facultyStatus:["Superannuated","Retired","VRS"]}},methods:{handleFileUpload:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var data,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.imgLoader=!0,e.selectedFile=t.target.files[0],(data=new FormData).append("files",e.selectedFile),n.next=6,e.$axios({method:"POST",url:"/upload",data:data});case 6:r=n.sent,e.image_url=r.data[0].url,e.faculty.image=r.data[0].id,e.imgLoader=!1;case 10:case"end":return n.stop()}}),n)})))()},addFaculty:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$refs.form.validate()&&(t.faculty.annual_year=t.$store.state.selectedYear,t.faculty.department=t.$store.state.auth.user.department,n=t.faculty,t.$store.dispatch("faculty/addFaculty",n).then((function(e){v.a.fire({title:"Success",text:"Added Successfully!",icon:"success",showConfirmButton:!1,timer:1500}),t.reset(),t.reloadData()})).catch((function(e){t.snackbar=!0,t.submitMessage=e})));case 1:case"end":return e.stop()}}),e)})))()},reloadData:function(){this.loading=!0;var t;t="department.id=".concat(this.$store.state.auth.user.department,"&deleted_ne=true&annual_year=").concat(this.$store.state.selectedYear),this.$store.dispatch("faculty/setFacultyData",{qs:t}),this.loading=!1},reset:function(){this.$refs.form.reset(),this.image_url=null}}},m=n(42),_=n(47),y=n.n(_),h=n(110),x=n(471),k=n(483),I=n(805),V=n(91),S=n(488),w=n(512),D=n(127),O=n(206),$=n(195),F=n(194),C=n(472),j=n(475),T=n(274),Y=n(72),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){t.preventDefault()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{cols:"3"}},[n("v-select",{attrs:{color:"green",rules:[function(t){return!!t||"Item is required"}],label:"Status",items:t.facultyStatus},model:{value:t.faculty.faculty_status,callback:function(e){t.$set(t.faculty,"faculty_status",e)},expression:"faculty.faculty_status"}})],1),t._v(" "),n("v-col",{attrs:{cols:"3"}},[n("v-text-field",{attrs:{color:"green",rules:[function(t){return!!t||"Item is required"}],label:"Name of the Official",required:""},model:{value:t.faculty.faculty_name,callback:function(e){t.$set(t.faculty,"faculty_name",e)},expression:"faculty.faculty_name"}})],1),t._v(" "),n("v-col",{attrs:{cols:"3"}},[n("v-text-field",{attrs:{color:"green",rules:[function(t){return!!t||"Item is required"}],label:"Designation",required:""},model:{value:t.faculty.designation,callback:function(e){t.$set(t.faculty,"designation",e)},expression:"faculty.designation"}})],1),t._v(" "),n("v-col",{attrs:{cols:"3"}},[n("v-menu",{ref:"menu1",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-text-field",t._g({attrs:{color:"green",rules:[function(t){return!!t||"Item is required"}],"return-value":t.duration_to,readonly:"",label:"Leaving Date"},on:{"update:returnValue":function(e){t.duration_to=e},"update:return-value":function(e){t.duration_to=e}},model:{value:t.faculty.leaving_date,callback:function(e){t.$set(t.faculty,"leaving_date",e)},expression:"faculty.leaving_date"}},r))]}}]),model:{value:t.duration_to,callback:function(e){t.duration_to=e},expression:"duration_to"}},[t._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.faculty.leaving_date,callback:function(e){t.$set(t.faculty,"leaving_date",e)},expression:"faculty.leaving_date"}},[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.duration_to=!1}}},[t._v("\n                Cancel\n              ")]),t._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu1.save(t.duration_to)}}},[t._v("\n                OK\n              ")])],1)],1)],1),t._v(" "),n("v-col",{attrs:{cols:"12",lg:"4"}},[n("h3",[n("span",{staticClass:"frm-title"},[t._v("Upload Image (If any)")])]),t._v(" "),n("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[n("v-img",{staticClass:"mt-3",attrs:{src:""+t.$axios.defaults.baseURL+t.image_url,"lazy-src":"/image_placeholder.png","max-width":"100%","max-height":"175"}},[n("v-progress-linear",{attrs:{active:t.imgLoader,indeterminate:t.imgLoader,absolute:"",bottom:"",color:"deep-purple accent-4"}}),t._v(" "),n("v-fade-transition",[r?n("v-overlay",{attrs:{absolute:"",color:"#00564c"}},[n("v-btn",{on:{click:function(e){return t.$refs.image.click()}}},[t._v("\n                      Upload Image\n                    ")])],1):t._e()],1)],1)]}}])}),t._v(" "),n("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",label:"File input"},on:{change:t.handleFileUpload}})],1)],1)],1),t._v(" "),n("v-row",{attrs:{"no-gutters":""}},[n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"mr-2",attrs:{small:"",color:"#d74f4f",dark:""},on:{click:t.reset}},[t._v("\n        Reset\n      ")]),t._v(" "),n("v-btn",{attrs:{small:"",color:"#57a727",dark:""},on:{click:t.addFaculty}},[t._v("\n        Add\n      ")])],1)],1)],1)}),[],!1,null,null,null),R=component.exports;y()(component,{VBtn:h.a,VCol:x.a,VContainer:k.a,VDatePicker:I.a,VFadeTransition:V.d,VForm:S.a,VHover:w.a,VImg:D.a,VMenu:O.a,VOverlay:$.a,VProgressLinear:F.a,VRow:C.a,VSelect:j.a,VSpacer:T.a,VTextField:Y.a});n(17),n(12),n(9),n(7),n(13);var P=n(4);function L(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var M={props:["reportYears"],data:function(){return{editFrom:!1,loading:!1,facultyStatus:["Superannuated","Retired","VRS"],editedItem:{annual_year:0,faculty_status:"",faculty_name:"",designation:"",leaving_date:"",deleted:!1,department:0,image:null},image_url:"/image_placeholder.png",deletedItem:{annual_year:0,faculty_status:"",faculty_name:"",designation:"",leaving_date:"",deleted:!1,department:0,image:null},imageToDelete:null,dialog:!1,headers:[{text:"Last updated",align:"left",value:"updated_at"},{text:"Status",value:"faculty_status"},{text:"Name",value:"faculty_name"},{text:"Designation",value:"designation"},{text:"Leaving date",value:"leaving_date"},{text:"Actions",value:"action",sortable:!1}]}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?L(Object(source),!0).forEach((function(e){Object(P.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):L(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.c)({facultyData:function(t){return t.faculty.facultyData.result}})),watch:{dialog:function(t){t||this.close()}},mounted:function(){this.annualYear=this.$store.state.selectedYear},methods:{handleFileUpload:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var data,r,l,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(e.image_url),void 0===e.image_url){n.next=13;break}return e.imageToDelete=e.editedItem.image.id,e.selectedFile=t.target.files[0],(data=new FormData).append("files",e.selectedFile),n.next=8,e.$axios({method:"POST",url:"/upload",data:data});case 8:r=n.sent,e.image_url=r.data[0].url,e.editedItem.image=r.data[0].id,n.next=22;break;case 13:return e.editedItem.image=null,e.selectedFile=t.target.files[0],(l=new FormData).append("files",e.selectedFile),n.next=19,e.$axios({method:"POST",url:"/upload",data:l});case 19:o=n.sent,e.image_url=o.data[0].url,e.editedItem.image=o.data[0].id;case 22:case"end":return n.stop()}}),n)})))()},reloadData:function(){this.loading=!0;var t;t="department.id=".concat(this.$store.state.auth.user.department,"&deleted_ne=true&annual_year=").concat(this.annualYear),this.$store.dispatch("faculty/setFacultyData",{qs:t}),this.loading=!1},editItem:function(t){this.editedIndex=this.facultyData.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){var e=this;this.facultyData.indexOf(t);this.deletedItem=Object.assign({},t),this.deletedItem.deleted=!0;var n=this.deletedItem;console.log(n),confirm("Are you sure you want to delete this item?")&&this.$store.dispatch("faculty/updateFaculty",n).then((function(t){v.a.fire({title:"Success",text:"Deleted Successfully!",icon:"success",showConfirmButton:!1,timer:1500}),e.reloadData()})).catch((function(t){e.snackbar=!0,e.submitMessage=t}))},close:function(){var t=this;this.dialog=!1,setTimeout((function(){t.facultyData=Object.assign({},t.defaultItem),t.editedIndex=-1}),300)},save:function(){var t=this;if(this.editedIndex>-1){var e=this.editedItem;console.log(e),this.$store.dispatch("faculty/updateFaculty",e).then((function(e){v.a.fire({title:"Success",text:"Updated Successfully!",icon:"success",showConfirmButton:!1,timer:1500}),t.reloadData()})).catch((function(e){t.snackbar=!0,t.submitMessage=e}))}else console.log(this.facultyData.push(this.editedItem));this.close()}}},A=(n(684),n(97)),N=n(26),U=n(205),E=n(823),B=n(266),H=n(198),z=n(98),J=n(171),K=n(60),G=n(99),Q=n(473),W=Object(m.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-data-table",{staticClass:"elevation-1",staticStyle:{"border-radius":"0"},attrs:{headers:t.headers,items:t.facultyData,"sort-by":"updated_at","sort-desc":"",loading:t.loading,"loading-text":"Loading... Please wait"},scopedSlots:t._u([{key:"item.updated_at",fn:function(e){var n=e.item;return[t._v("\n      "+t._s(t.$moment(n.updated_at).fromNow())+"\n    ")]}},{key:"item.approval_status",fn:function(e){var r=e.item;return[n("v-chip",{attrs:{color:t.getColor(r.approval_status),dark:""}},[t._v("\n        "+t._s(r.approval_status)+"\n      ")])]}},{key:"top",fn:function(){return[n("v-toolbar",{staticClass:"d-flex justify mt-4 pt-1",staticStyle:{"border-radius":"0"},attrs:{flat:"",color:"#ebebeb"}},[n("v-toolbar-title",[n("span",{staticClass:"frm-title"},[t._v("Faculty and Staff served NIMHANS")])]),t._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t._v(" "),n("v-select",{staticClass:"justify-end mt-6",attrs:{items:t.reportYears,"item-text":"val","item-value":"id",label:"Select Year"},on:{change:function(e){return t.reloadData()}},model:{value:t.annualYear,callback:function(e){t.annualYear=e},expression:"annualYear"}}),t._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t._v(" "),n("v-tooltip",{attrs:{right:"",color:"blue-grey darken-2"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({attrs:{"x-small":"",fab:"",color:"green",dark:""},on:{click:t.reloadData}},r),[n("v-icon",[t._v("mdi-reload")])],1)]}}])},[t._v(" "),n("span",[t._v("Reload Data")])]),t._v(" "),n("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",{attrs:{flat:""}},[n("v-toolbar",{attrs:{dark:"",color:"#41704e"}},[n("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.dialog=!1}}},[n("v-icon",[t._v("mdi-close")])],1),t._v(" "),n("v-toolbar-title",[t._v("Faculty and Staff served NIMHANS")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{dark:"",text:""},on:{click:t.close}},[t._v("\n                  Cancel\n                ")]),t._v(" "),n("v-btn",{attrs:{dark:"",text:""},on:{click:t.save}},[t._v("\n                  Save\n                ")])],1)],1),t._v(" "),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"3"}},[n("v-text-field",{attrs:{label:"Name of the official"},model:{value:t.editedItem.faculty_name,callback:function(e){t.$set(t.editedItem,"faculty_name",e)},expression:"editedItem.faculty_name"}})],1),t._v(" "),n("v-col",{attrs:{cols:"3"}},[n("v-select",{attrs:{items:t.facultyStatus,label:"Status"},model:{value:t.editedItem.faculty_status,callback:function(e){t.$set(t.editedItem,"faculty_status",e)},expression:"editedItem.faculty_status"}})],1),t._v(" "),n("v-col",{attrs:{cols:"3"}},[n("v-text-field",{attrs:{label:"Designation"},model:{value:t.editedItem.designation,callback:function(e){t.$set(t.editedItem,"designation",e)},expression:"editedItem.designation"}})],1),t._v(" "),n("v-col",{attrs:{cols:"3"}},[n("v-menu",{ref:"menu1",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-text-field",t._g({attrs:{color:"green",rules:[function(t){return!!t||"Item is required"}],"return-value":t.date1,readonly:"",label:"To Date"},on:{"update:returnValue":function(e){t.date1=e},"update:return-value":function(e){t.date1=e}},model:{value:t.editedItem.leaving_date,callback:function(e){t.$set(t.editedItem,"leaving_date",e)},expression:"editedItem.leaving_date"}},r))]}}]),model:{value:t.duration_to,callback:function(e){t.duration_to=e},expression:"duration_to"}},[t._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.editedItem.leaving_date,callback:function(e){t.$set(t.editedItem,"leaving_date",e)},expression:"editedItem.leaving_date"}},[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.duration_to=!1}}},[t._v("\n                Cancel\n              ")]),t._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu1.save(t.date1)}}},[t._v("\n                OK\n              ")])],1)],1)],1)],1),t._v(" "),n("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[n("v-img",{staticClass:"grey lighten-2",attrs:{src:""+t.$axios.defaults.baseURL+t.image_url,"lazy-src":"/image_placeholder.png","aspect-ratio":"1","max-width":"100%","max-height":"400"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[n("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)},[t._v(" "),n("v-fade-transition",[r?n("v-overlay",{attrs:{absolute:"",color:"#036358"}},[n("v-btn",{on:{click:function(e){return t.$refs.image.click()}}},[t._v("\n                            "+t._s(t.image_url?"Edit Image":"Upload Image")+"\n                          ")])],1):t._e()],1)],1)]}}])}),t._v(" "),n("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",label:"File input"},on:{change:t.handleFileUpload}})],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(e){var r=e.item;return[n("v-icon",{attrs:{centre:"",color:"green"},on:{click:function(e){return t.editItem(r)}}},[t._v("mdi-pencil-box")]),t._v(" "),n("v-icon",{attrs:{centre:"",color:"error"},on:{click:function(e){return t.deleteItem(r)}}},[t._v("mdi-delete-circle")])]}}])})],1)}),[],!1,null,"09bed185",null),X=W.exports;y()(W,{VBtn:h.a,VCard:A.a,VCardText:N.b,VChip:U.a,VCol:x.a,VContainer:k.a,VDataTable:E.a,VDatePicker:I.a,VDialog:B.a,VDivider:H.a,VFadeTransition:V.d,VHover:w.a,VIcon:z.a,VImg:D.a,VMenu:O.a,VOverlay:$.a,VProgressCircular:J.a,VRow:C.a,VSelect:j.a,VSpacer:T.a,VTextField:Y.a,VToolbar:K.a,VToolbarItems:G.a,VToolbarTitle:G.b,VTooltip:Q.a});var Z={head:function(){return{title:"Faculty and Staff served NIMHANS"}},components:{PageHeader:l.a,YearDialog:o.a,FacultyForm:R,FacultyTable:X},data:function(){return{selectedYear:0}},computed:{reportYears:function(){return this.$store.state.reportYears}},fetch:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,"",r="department.id=".concat(n.state.auth.user.department,"&deleted_ne=true"),e.next=5,n.dispatch("faculty/setFacultyData",{qs:r});case 5:case"end":return e.stop()}}),e)})))()}},tt=(n(686),n(795)),et=n(849),at=n(827),nt=Object(m.a)(Z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-tabs",{attrs:{flat:"","background-color":"#323232",color:"#6ac447",dark:""}},[n("v-tab",[n("span",{staticClass:"mdi mdi-note-outline cust-icon"}),t._v("\n      Departmental Staff\n    ")]),t._v(" "),n("v-tab",[n("span",{staticClass:"mdi mdi-table cust-icon"}),t._v("\n      Records\n    ")]),t._v(" "),n("v-tab-item",[n("v-card",{attrs:{tile:""}},[n("v-card-text",[0==t.$store.state.selectedYear?n("YearDialog"):t._e(),t._v(" "),n("PageHeader",{staticClass:"ml-0 pb-0 pt-0",attrs:{title:t.$metaInfo.title,reportYears:t.reportYears}}),t._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("FacultyForm")],1)],1)],1)],1)],1),t._v(" "),n("v-tab-item",[n("v-card",{attrs:{flat:""}},[n("v-card-text",{staticClass:"px-0 py-1"},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("FacultyTable",{attrs:{reportYears:t.reportYears}})],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"c4979820",null);e.default=nt.exports;y()(nt,{VCard:A.a,VCardText:N.b,VCol:x.a,VRow:C.a,VTab:tt.a,VTabItem:et.a,VTabs:at.a})}}]);