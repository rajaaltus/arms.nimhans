(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{604:function(t,d,e){var content=e(785);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(15).default)("2a1ef4db",content,!0,{sourceMap:!1})},605:function(t,d,e){var content=e(787);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(15).default)("5e6dd598",content,!0,{sourceMap:!1})},784:function(t,d,e){"use strict";var n=e(604);e.n(n).a},785:function(t,d,e){(d=e(14)(!1)).push([t.i,'.tiptap-vuetify-editor{position:relative;max-width:100%;margin:0 auto 5rem}.tiptap-vuetify-editor__content{word-wrap:break-word;word-break:break-word}.tiptap-vuetify-editor__content *{caret-color:currentColor}.tiptap-vuetify-editor__content pre{padding:.7rem 1rem;border-radius:5px;background:#000;color:#fff;font-size:.8rem;overflow-x:auto}.tiptap-vuetify-editor__content pre code{display:block}.tiptap-vuetify-editor__content p code{padding:.2rem .4rem;border-radius:5px;font-size:.8rem;font-weight:700;background:rgba(0,0,0,.1);color:rgba(0,0,0,.8)}.tiptap-vuetify-editor__content ol,.tiptap-vuetify-editor__content ul{padding-left:1rem}.tiptap-vuetify-editor__content li>ol,.tiptap-vuetify-editor__content li>p,.tiptap-vuetify-editor__content li>ul{margin:0}.tiptap-vuetify-editor__content a{color:inherit}.tiptap-vuetify-editor__content blockquote{border-left:3px solid rgba(0,0,0,.1);color:rgba(0,0,0,.8);padding-left:.8rem;font-style:italic}.tiptap-vuetify-editor__content blockquote p{margin:0}.tiptap-vuetify-editor__content img{max-width:100%;border-radius:3px}.tiptap-vuetify-editor__content table{border-collapse:collapse;table-layout:fixed;width:100%;margin:0;overflow:hidden}.tiptap-vuetify-editor__content table td,.tiptap-vuetify-editor__content table th{min-width:1em;border:1px solid #ccc!important;padding:3px 5px;vertical-align:top;box-sizing:border-box;position:relative}.tiptap-vuetify-editor__content table td>*,.tiptap-vuetify-editor__content table th>*{margin-bottom:0}.tiptap-vuetify-editor__content table th{font-weight:700;text-align:center}.tiptap-vuetify-editor__content table .selectedCell:after{z-index:2;position:absolute;content:"";left:0;right:0;top:0;bottom:0;background:rgba(200,200,255,.4);pointer-events:none}.tiptap-vuetify-editor__content table .column-resize-handle{position:absolute;right:-2px;top:0;bottom:0;width:4px;z-index:20;background-color:#adf;pointer-events:none}.tiptap-vuetify-editor__content .tableWrapper{margin:1em 0;overflow-x:auto}.tiptap-vuetify-editor__content .resize-cursor{cursor:ew-resize;cursor:col-resize}',""]),t.exports=d},786:function(t,d,e){"use strict";var n=e(605);e.n(n).a},787:function(t,d,e){(d=e(14)(!1)).push([t.i,".preview[data-v-20caacbe]{max-width:100%}.doc[data-v-20caacbe]{overflow:scroll}table[data-v-20caacbe]{font-family:arial,sans-serif;border-collapse:collapse;width:100%}td[data-v-20caacbe],th[data-v-20caacbe]{border:1px solid #ddd;text-align:left;padding:8px}tr[data-v-20caacbe]:nth-child(2n){background-color:#ddd}",""]),t.exports=d},826:function(t,d,e){"use strict";e.r(d);e(17),e(12),e(9),e(7),e(13),e(20);var n=e(0),r=e(4),o=e(66),c=e(132),l=e(224),h=e(41),f={props:["content"],components:{TiptapVuetify:l.o},data:function(){return{extensions:[l.g,l.a,l.j,l.q,l.n,l.i,l.k,l.c,l.l,[l.f,{options:{levels:[1,2,3]}}],l.b,l.j,l.d,l.h,l.m,l.e],nativeExtensions:[new h.q({resizable:!0}),new h.s,new h.r,new h.t]}},methods:{beforeDestroy:function(){this.editor.destroy()}}},y=(e(784),e(42)),x=Object(y.a)(f,(function(){var t=this,d=t.$createElement,e=t._self._c||d;return e("div",{staticClass:"editor"},[e("ClientOnly",{scopedSlots:t._u([{key:"placeholder",fn:function(){return[t._v("\n      Loading...\n    ")]},proxy:!0}])},[e("tiptap-vuetify",{attrs:{extensions:t.extensions,"native-extensions":t.nativeExtensions},model:{value:t.content,callback:function(d){t.content=d},expression:"content"}})],1)],1)}),[],!1,null,null,null).exports;function m(object,t){var d=Object.keys(object);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(object);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),d.push.apply(d,e)}return d}var v={head:function(){return{title:"Generated Report"}},components:{PageHeader:c.a,FinalEditor:x},data:function(){return{}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(d){Object(r.a)(t,d,source[d])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(d){Object.defineProperty(t,d,Object.getOwnPropertyDescriptor(source,d))}))}return t}({},Object(o.c)({savedData:function(t){return t.report.generatedReport},aboutData:function(t){return t.about.newAbout[0]},clinicalData:function(t){return t.clinical.clinicalData.result},emergencyData:function(t){return t.emergency.emergencyData},diagnosticsData:function(t){return t.diagnostic.diagnosticData},specialData:function(t){return t.special.specialData},otservicesData:function(t){return t.otservice.otservicesData},hrdCourses:function(t){return t.hrdCourse.hrdCourses.result},hrdTrainings:function(t){return t.hrdTraining.hrdTrainings.result},retaired:function(t){return t.faculty.facultyData.result}}),{content:function(){return this.formattedAbout+this.formattedClinical+this.formattedEmergency+this.formattedDiagnostics+this.formattedSpecial+this.formattedOT+this.formattedHRD+this.formattedTrainings+this.formattedRetaired+this.sectionA+this.sectionB+this.sectionC+this.sectionD+this.sectionE+this.sectionF},formattedAbout:function(){return this.aboutData?"\n      <center>\n      <h2>NATIONAL INSTITUTE OF MENTAL HEALTH &amp; NEUROSCIENCES</h2>\n      <h3>Bengaluru â€“ 560029</h3>\n      <h2>Period of the report:1st April ".concat(this.$store.state.selectedYear," to 31st March ").concat(this.$store.state.selectedYear+1,"</h2>\n      </center>\n      <h1><b><u>Section A:</u></b></h1>\n      <h3>1. ABOUT THE DEPARTMENT</h3>\n      <h3>A. Introduction: Specifically indicate the recognition / contribution of the Department during the year to policies, planning and programmes at State / National and International levels.</h3>\n      <p>").concat(this.aboutData.introduction,"</p>\n      <h3>B. New facilities developed: New initiatives taken up by the Department(s) within NIMHANS during the year.</h3>\n      <p>").concat(this.aboutData.facilities,"</p>\n      "):""},formattedClinical:function(){return console.log(this.clinicalData),this.clinicalData.length>0?'\n\n      <h3>2. PATIENT CARE ACTIVITIES</h3>\n      <h3> A. Clinical Services</h3>\n      <table>\n      <thead>\n      <tr>\n      <th style="border: 1px solid #dddddd;">Clinical Services</th>\n      <th style="border: 1px solid #dddddd;">No. of Patients / Cases</th>\n      </tr>\n      <thead>\n\n      <tbody>\n      <tr>\n      <td style="border: 1px solid #dddddd;">Screenings</td>\n      <td style="border: 1px solid #dddddd;">'.concat(this.clinicalData.reduce((function(t,d){return t+d.screenings}),0),'</td>\n      </tr>\n      <tr>\n      <td style="border: 1px solid #dddddd;">Registrations</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.clinicalData.reduce((function(t,d){return t+d.registrations}),0),'</td>\n      </tr>\n      <tr>\n      <td style="border: 1px solid #dddddd;">followups</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.clinicalData.reduce((function(t,d){return t+d.followups}),0),'</td>\n      </tr>\n      <tr>\n      <td style="border: 1px solid #dddddd;">Admissions</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.clinicalData.reduce((function(t,d){return t+d.admissions}),0),'</td>\n      </tr>\n      <tr>\n      <td style="border: 1px solid #dddddd;">Discharges</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.clinicalData.reduce((function(t,d){return t+d.discharges}),0),'</td>\n      </tr>\n      <tr>\n      <td style="border: 1px solid #dddddd;">Deaths</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.clinicalData.reduce((function(t,d){return t+d.deaths}),0),'</td>\n      </tr>\n      <tr>\n      <td style="border: 1px solid #dddddd;">Emergencies</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.clinicalData.reduce((function(t,d){return t+d.emergencies}),0),'</td>\n      </tr>\n      <tr>\n      <td style="border: 1px solid #dddddd;">External Reference</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.clinicalData.reduce((function(t,d){return t+d.external_ref}),0),'</td>\n      </tr>\n      <tr>\n      <td style="border: 1px solid #dddddd;">Internal Reference</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.clinicalData.reduce((function(t,d){return t+d.internal_ref}),0),"</td>\n      </tr>\n      </tbody>\n      </table>\n      "):""},formattedEmergency:function(){return this.emergencyData.length>0?'\n      <h3> B. Emergency Services</h3>\n      <table>\n      <tr>\n      <th style="border: 1px solid #dddddd;">Emergency Services</th>\n      <th style="border: 1px solid #dddddd;">No.Of Patients /Cases</th>\n      </tr>\n\n      <td style="border: 1px solid #dddddd;">Registrations</td>\n      <td style="border: 1px solid #dddddd;">'.concat(this.emergencyData.reduce((function(t,d){return t+d.registrations}),0),'</td>\n      </tr>\n      <tr>\n      <td style="border: 1px solid #dddddd;">Admissions</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.emergencyData.reduce((function(t,d){return t+d.admissions}),0),'</td>\n      </tr>\n      <tr>\n      <td style="border: 1px solid #dddddd;">Deaths</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.emergencyData.reduce((function(t,d){return t+d.deaths}),0),'</td>\n      </tr>\n      <tr>\n      <td style="border: 1px solid #dddddd;">External Reference</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.emergencyData.reduce((function(t,d){return t+d.external_ref}),0),'</td>\n      </tr>\n      <tr>\n      <td style="border: 1px solid #dddddd;">Internal Reference</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.emergencyData.reduce((function(t,d){return t+d.internal_ref}),0),"</td>\n      </tr>\n      </table>\n      "):""},formattedDiagnostics:function(){if(this.diagnosticsData.length>0){for(var html='\n      <h3> C. Diagnostic Services</h3>\n      <table>\n      <tr>\n      <th style="border: 1px solid #dddddd;">Lab Services</th>\n      <th style="border: 1px solid #dddddd;">Total No.Of Samples Analyzed</th>\n      </tr>',i=0;i<this.diagnosticsData.length;i++){html+='<tr>\n      <td style="border: 1px solid #dddddd;">'.concat(this.diagnosticsData[i].pc_diagnostic_test.test_name,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.diagnosticsData[i].samples_analyzed,"</td>\n      </tr>")}return html+="</table>\n      "}return""},formattedSpecial:function(){if(this.specialData.length>0){for(var html='\n      <h3>D. Special Clinics / Services / Procedures</h3>\n      <table>\n      <tr>\n      <th style="border: 1px solid #dddddd;">Special Services</th>\n      <th style="border: 1px solid #dddddd;">New Patients</th>\n      <th style="border: 1px solid #dddddd;">Follow-up Patients</th>\n      <th style="border: 1px solid #dddddd;">Referrals</th>\n      <th style="border: 1px solid #dddddd;">Description</th>\n      </tr>',i=0;i<this.specialData.length;i++){html+='<tr>\n      <td style="border: 1px solid #dddddd;">'.concat(this.specialData[i].service_name,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.specialData[i].new_patients,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.specialData[i].followup_patients,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.specialData[i].referrals,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.specialData[i].description,"</td>\n      </tr>")}return html+="</table>\n      "}return""},formattedOT:function(){if(this.otservicesData.length>0){for(var html='\n      <h3>E.\tOT & Other Procedures</h3>\n      <table>\n      <tr>\n      <th style="border: 1px solid #dddddd;">Procedure Name</th>\n      <th style="border: 1px solid #dddddd;">Classification</th>\n      <th style="border: 1px solid #dddddd;">No of Patients</th>\n      <th style="border: 1px solid #dddddd;">Description</th>\n      </tr>',i=0;i<this.otservicesData.length;i++){html+='<tr>\n      <td style="border: 1px solid #dddddd;">'.concat(this.otservicesData[i].Procedure,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.otservicesData[i].classification,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.otservicesData[i].no_of_patients,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.otservicesData[i].description,"</td>\n      </tr>")}return html+="</table>\n      "}return""},formattedHRD:function(){if(this.hrdCourses.length>0){for(var html='\n      <h3>3.\tHUMAN RESOURCE DEVELOPMENT </h3>\n      <h3>A.\tDetails of Regular Courses</h3>\n      <table>\n      <tr>\n      <th style="border: 1px solid #dddddd;">Course</th>\n      <th style="border: 1px solid #dddddd;">Name of the Candidate</th>\n      <th style="border: 1px solid #dddddd;">Duration</th>\n      <th style="border: 1px solid #dddddd;">Status</th>\n      <th style="border: 1px solid #dddddd;">Title of the thesis (If any)</th>\n      <th style="border: 1px solid #dddddd;">Guide(s)(If any)</th>\n      </tr>',i=0;i<this.hrdCourses.length;i++){html+='<tr>\n      <td style="border: 1px solid #dddddd;">'.concat(this.hrdCourses[i].course_name,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.hrdCourses[i].candidate_name,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.hrdCourses[i].durations,' Years</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.hrdCourses[i].remarks_status,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.hrdCourses[i].thesis_title,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.hrdCourses[i].guides,"</td>\n      </tr>")}return html+="</table>\n      "}return""},formattedTrainings:function(){if(this.hrdTrainings.length>0){for(var html='\n      <h3>B.\tFaculty/staff/students from other institutions trained at NIMHANS</h3>\n      <table>\n      <tr>\n      <th style="border: 1px solid #dddddd;">Name of the course / Training</th>\n      <th style="border: 1px solid #dddddd;">Institutional affiliation</th>\n      <th style="border: 1px solid #dddddd;">Number of Candidates</th>\n      <th style="border: 1px solid #dddddd;">From</th>\n      <th style="border: 1px solid #dddddd;">To</th>\n      <th style="border: 1px solid #dddddd;">Status</th>\n      <th style="border: 1px solid #dddddd;">Description</th>\n      </tr>',i=0;i<this.hrdTrainings.length;i++){html+='<tr>\n      <td style="border: 1px solid #dddddd;">'.concat(this.hrdTrainings[i].training_name,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.hrdTrainings[i].institutional_affiliation,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.hrdTrainings[i].no_of_candidates,' Years</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.hrdTrainings[i].from_date,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.hrdTrainings[i].to_date,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.hrdTrainings[i].remarks_status,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.hrdTrainings[i].brief_report,"</td>\n      </tr>")}return html+="</table>\n      "}return""},formattedRetaired:function(){if(this.retaired.length>0){for(var html='\n      <h3>4.\tDETAILS OF DEPARTMENTAL STAFF</h3>\n      <h3>B.\tA.\tList of Faculty and staff served NIMHANS and Superannuated / Resigned / VRS</h3>\n      <table>\n      <tr>\n      <th style="border: 1px solid #dddddd;">Superannuated / Resigned / VRS</th>\n      <th style="border: 1px solid #dddddd;">Name of the Official and Designation</th>\n      <th style="border: 1px solid #dddddd;">Date of Joining</th>\n      <th style="border: 1px solid #dddddd;">Date of Leaving</th>\n      <th style="border: 1px solid #dddddd;">Image URL</th>\n      </tr>',i=0;i<this.retaired.length;i++){html+='<tr>\n      <td style="border: 1px solid #dddddd;">'.concat(this.retaired[i].faculty_status,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.retaired[i].faculty_name,'</td>\n      <td style="border: 1px solid #dddddd;"></td>\n      <td style="border: 1px solid #dddddd;">').concat(this.retaired[i].leaving_date,'</td>\n      <td style="border: 1px solid #dddddd;">').concat(this.retaired[i].image?this.retaired[i].image:"","</td>\n      </tr>")}return html+="</table>\n      "}return""},sectionA:function(){if(this.savedData.section_a)return this.savedData.section_a},sectionB:function(){if(this.savedData.section_a)return this.savedData.section_b},sectionC:function(){if(this.savedData.section_c)return this.savedData.section_c},sectionD:function(){if(this.savedData.section_d)return this.savedData.section_d},sectionE:function(){if(this.savedData.section_e)return this.savedData.section_e},sectionF:function(){if(this.savedData.section_f)return this.savedData.section_f}}),fetch:function(t){return Object(n.a)(regeneratorRuntime.mark((function d(){var e,n,r;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return e=t.store,n=t.params,d.next=3,e.dispatch("report/getById",{id:n.id});case 3:return r="",r="department.id=".concat(e.state.auth.user.department,"&annual_year=").concat(e.state.report.generatedReport.annual_year),d.next=7,e.dispatch("about/setAboutData",{query:r});case 7:return d.next=9,e.dispatch("clinical/setClinicalData",{qs:r});case 9:return d.next=11,e.dispatch("emergency/setEmergencyData",{qs:r});case 11:return d.next=13,e.dispatch("diagnostic/setDiagnosticData",{qs:r});case 13:return d.next=15,e.dispatch("special/setSpecialData",{qs:r});case 15:return d.next=17,e.dispatch("otservice/setOTServicesData",{qs:r});case 17:return d.next=19,e.dispatch("hrdCourse/setHRDCourses",{qs:r});case 19:return d.next=21,e.dispatch("hrdTraining/setHRDTrainings",{qs:r});case 21:return d.next=23,e.dispatch("faculty/setFacultyData",{qs:r});case 23:case"end":return d.stop()}}),d)})))()},methods:{copyReport:function(){console.log("copied!")},exportToDoc:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",d="<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>Export HTML To Doc</title></head><body>",e="</body></html>",html=d+document.getElementById("download").innerHTML+e,n=new Blob(["\ufeff",html],{type:"application/msword"}),r="data:application/vnd.ms-word;charset=utf-8,"+encodeURIComponent(html);t=t?t+".doc":"document.doc";var o=document.createElement("a");document.body.appendChild(o),navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(n,t):(o.href=r,o.download=t,o.click()),document.body.removeChild(o)}}},D=(e(786),e(47)),_=e.n(D),w=e(110),T=e(98),C=e(76),S=e(274),E=e(60),O=e(99),R=e(473),A=Object(y.a)(v,(function(){var t=this,d=t.$createElement,e=t._self._c||d;return e("div",[e("div",{staticClass:"preview"},[e("v-sheet",{attrs:{color:"blue-grey darken-3",width:"100%",height:"200vh"}},[e("v-toolbar",{attrs:{color:"blue-grey darken-3",dark:""}},[e("v-toolbar-title",{staticClass:"white--text"},[t._v("Consolidated Report Preview\n        ")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-tooltip",{attrs:{left:"",color:"blue-grey darken-3"},scopedSlots:t._u([{key:"activator",fn:function(d){var n=d.on;return[e("v-btn",t._g({attrs:{icon:""}},n),[e("v-icon",{on:{click:function(d){return t.exportToDoc("Report-"+t.$route.params.id)}}},[t._v("mdi-download")])],1)]}}])},[t._v(" "),e("span",[t._v("Download Report")])])],1),t._v(" "),e("v-sheet",{staticClass:"mx-auto py-4 px-6 doc",attrs:{tile:"",id:"download",elevation:"6",height:"200vh",width:"100%"},domProps:{innerHTML:t._s(t.content)}})],1)],1)])}),[],!1,null,"20caacbe",null);d.default=A.exports;_()(A,{VBtn:w.a,VIcon:T.a,VSheet:C.a,VSpacer:S.a,VToolbar:E.a,VToolbarTitle:O.b,VTooltip:R.a})}}]);