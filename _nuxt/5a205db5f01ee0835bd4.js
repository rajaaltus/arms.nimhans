(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{510:function(e,t,r){"use strict";var n=r(100),o=r(33),l=r(8),c=r(11);t.a=Object(l.a)(n.a,o.a).extend({name:"v-hover",props:{disabled:{type:Boolean,default:!1},value:{type:Boolean,default:void 0}},methods:{onMouseEnter:function(){this.runDelay("open")},onMouseLeave:function(){this.runDelay("close")}},render:function(){return this.$scopedSlots.default||void 0!==this.value?(this.$scopedSlots.default&&(element=this.$scopedSlots.default({hover:this.isActive})),Array.isArray(element)&&1===element.length&&(element=element[0]),element&&!Array.isArray(element)&&element.tag?(this.disabled||(element.data=element.data||{},this._g(element.data,{mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})),element):(Object(c.c)("v-hover should only contain a single element",this),element)):(Object(c.c)("v-hover is missing a default scopedSlot or bound value",this),null);var element}})},549:function(e,t,r){"use strict";r.r(t);var n=r(2),o=r(611),l=r.n(o);n.default.use(l.a)},550:function(e,t,r){var content=r(677);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(15).default)("8dd3bb14",content,!0,{sourceMap:!1})},676:function(e,t,r){"use strict";var n=r(550);r.n(n).a},677:function(e,t,r){(t=r(14)(!1)).push([e.i,".page-title{background:none;border-left:10px solid #57a727;display:inline-flex;line-height:0;height:40px;vertical-align:center!important}.ck.ck-editor__main>.ck-editor__editable{height:250px}",""]),e.exports=t},832:function(e,t,r){"use strict";r.r(t);r(17),r(12),r(9),r(7),r(13),r(20);var n=r(0),o=r(4),l=r(132),c=r(214),d=r(66),m=r(31),f=r.n(m);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}r(549);var v={head:function(){return{title:"About the Department"}},components:{PageHeader:l.a,YearDialog:c.a},data:function(){return{overlay:!1,img_url1:null,img_url2:null,img_url3:null,Ydialog:!1,editorConfig:{height:"200px"},selectedYear:0,departmentAbout:{annual_year:0,department:0,deleted:!1,introduction:"",facilities:"",image_1:null,image_2:null,image_3:null},profileImage:{id:0,image_1:null,image_2:null,image_3:null},imageToDelete:null,editedItem:{annual_year:0,department:0,deleted:!1,introduction:"",facilities:"",image_1:null,image_2:null,image_3:null},selectedFile:"",addDepartmentImage:{departmentProfileId:0,imageCode:"",name:"",path:"",status:"VALID"},addImageContent:{data:"",dataContentType:"",departmentImageId:0,status:"VALID"},annualYear:0}},watch:{annualYear:function(e){this.reload()}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({reportYears:function(){return this.$store.state.reportYears}},Object(d.c)({newAbout:function(e){return e.about.newAbout}}),{editor:function(){return r(612)}}),fetch:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.store,o=n.state.auth.user.id,r.next=4,n.dispatch("user/setFullUser",{id:o}).catch((function(e){t.snackbar=!0,t.submitMessage=e}));case 4:return"",l="department.id=".concat(n.state.auth.user.department,"&annual_year=").concat(n.state.selectedYear),r.next=8,n.dispatch("about/setAboutData",{query:l});case 8:case"end":return r.stop()}}),r)})))()},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.annualYear=e.$store.state.selectedYear,e.newAbout.length>0&&(e.departmentAbout=Object.assign({},e.newAbout[0]),null!==e.$store.state.about.newAbout[0].image_1?e.img_url1=e.$store.state.about.newAbout[0].image_1.url:e.img_url1=null,null!=e.$store.state.about.newAbout[0].image_2?e.img_url2=e.$store.state.about.newAbout[0].image_2.url:e.img_url2=null,null!=e.$store.state.about.newAbout[0].image_3?e.img_url3=e.$store.state.about.newAbout[0].image_3.url:e.img_url3=null);case 2:case"end":return t.stop()}}),t)})))()},methods:{setYear:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("setting..."),e.annualYear=e.$store.state.selectedYear;case 2:case"end":return t.stop()}}),t)})))()},handleFileUpload1:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var data,n,o,l,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==t.img_url1&&void 0!==t.img_url1){r.next=14;break}return t.selectedFile=e.target.files[0],(data=new FormData).append("files",t.selectedFile),r.next=6,t.$axios({method:"POST",url:"/upload",data:data});case 6:return n=r.sent,t.img_url1=n.data[0].url,t.departmentAbout.image_1=n.data[0].id,o=t.departmentAbout,r.next=12,t.$store.dispatch("about/updateAbout",o).then((function(e){f.a.fire({title:"Success",text:"Department Profile Updated!",icon:"success",showConfirmButton:!1,timer:1500}),t.imageToDelete&&(t.$store.dispatch("deleteFile",{id:t.imageToDelete}),t.imageToDelete=null),t.reload()})).catch((function(e){f.a.fire({title:"Oops!",text:"Exceeds Word limit, (should be less than 150 words.)",icon:"warning",showConfirmButton:!1,timer:3e3})}));case 12:r.next=26;break;case 14:return t.imageToDelete=t.departmentAbout.image_1.id,t.selectedFile=e.target.files[0],(l=new FormData).append("files",t.selectedFile),r.next=20,t.$axios({method:"POST",url:"/upload",data:l});case 20:return c=r.sent,t.img_url1=c.data[0].url,t.departmentAbout.image_1=c.data[0].id,o=Object.assign({},{id:t.departmentAbout.id,image_1:t.departmentAbout.image_1}),r.next=26,t.$store.dispatch("about/updateAbout",o).then((function(e){f.a.fire({title:"Success",text:"Department Profile Updated!",icon:"success",showConfirmButton:!1,timer:1500}),t.imageToDelete&&(t.$store.dispatch("deleteFile",{id:t.imageToDelete}),t.imageToDelete=null),t.reload()})).catch((function(e){f.a.fire({title:"Oops!",text:"Exceeds Word limit, (should be less than 150 words.)",icon:"warning",showConfirmButton:!1,timer:3e3})}));case 26:case"end":return r.stop()}}),r)})))()},handleFileUpload2:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var data,n,o,l,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==t.img_url2&&void 0!==t.img_url2){r.next=14;break}return t.selectedFile=e.target.files[0],(data=new FormData).append("files",t.selectedFile),r.next=6,t.$axios({method:"POST",url:"/upload",data:data});case 6:return n=r.sent,t.img_url2=n.data[0].url,t.departmentAbout.image_2=n.data[0].id,o=t.departmentAbout,r.next=12,t.$store.dispatch("about/updateAbout",o).then((function(e){f.a.fire({title:"Success",text:"Department Profile Updated!",icon:"success",showConfirmButton:!1,timer:1500}),t.imageToDelete&&(t.$store.dispatch("deleteFile",{id:t.imageToDelete}),t.imageToDelete=null),t.reload()})).catch((function(e){f.a.fire({title:"Oops!",text:"Exceeds Word limit, (should be less than 150 words.)",icon:"warning",showConfirmButton:!1,timer:3e3})}));case 12:r.next=26;break;case 14:return t.imageToDelete=t.departmentAbout.image_2.id,t.selectedFile=e.target.files[0],(l=new FormData).append("files",t.selectedFile),r.next=20,t.$axios({method:"POST",url:"/upload",data:l});case 20:return c=r.sent,t.img_url2=c.data[0].url,t.departmentAbout.image_2=c.data[0].id,o=Object.assign({},{id:t.departmentAbout.id,image_2:t.departmentAbout.image_2}),r.next=26,t.$store.dispatch("about/updateAbout",o).then((function(e){f.a.fire({title:"Success",text:"Department Profile Updated!",icon:"success",showConfirmButton:!1,timer:1500}),t.imageToDelete&&(t.$store.dispatch("deleteFile",{id:t.imageToDelete}),t.imageToDelete=null),t.reload()})).catch((function(e){f.a.fire({title:"Oops!",text:"Exceeds Word limit, (should be less than 150 words.)",icon:"warning",showConfirmButton:!1,timer:3e3})}));case 26:case"end":return r.stop()}}),r)})))()},handleFileUpload3:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var data,n,o,l,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==t.img_url3&&void 0!==t.img_url3){r.next=14;break}return t.selectedFile=e.target.files[0],(data=new FormData).append("files",t.selectedFile),r.next=6,t.$axios({method:"POST",url:"/upload",data:data}).catch((function(e){f.a.fire({title:"Something Wrong!",text:e.response,icon:"error"})}));case 6:return n=r.sent,t.img_url3=n.data[0].url,t.departmentAbout.image_3=n.data[0].id,o=t.departmentAbout,r.next=12,t.$store.dispatch("about/updateAbout",o).then((function(e){f.a.fire({title:"Success",text:"Department Profile Updated!",icon:"success",showConfirmButton:!1,timer:1500}),t.imageToDelete&&(t.$store.dispatch("deleteFile",{id:t.imageToDelete}),t.imageToDelete=null),t.reload()})).catch((function(e){f.a.fire({title:"Oops!",text:"Exceeds Word limit, (should be less than 150 words.)",icon:"warning",showConfirmButton:!1,timer:3e3})}));case 12:r.next=26;break;case 14:return t.imageToDelete=t.departmentAbout.image_3.id,t.selectedFile=e.target.files[0],(l=new FormData).append("files",t.selectedFile),r.next=20,t.$axios({method:"POST",url:"/upload",data:l}).catch((function(e){f.a.fire({title:"Something Wrong!",text:e.response,icon:"error"})}));case 20:return c=r.sent,t.img_url3=c.data[0].url,t.departmentAbout.image_3=c.data[0].id,o=Object.assign({},{id:t.departmentAbout.id,image_3:t.departmentAbout.image_3}),r.next=26,t.$store.dispatch("about/updateAbout",o).then((function(e){f.a.fire({title:"Success",text:"Department Profile Updated!",icon:"success",showConfirmButton:!1,timer:1500}),t.imageToDelete&&(t.$store.dispatch("deleteFile",{id:t.imageToDelete}),t.imageToDelete=null),t.reload()})).catch((function(e){f.a.fire({title:"Oops!",text:"Exceeds Word limit, (should be less than 150 words.)",icon:"warning",showConfirmButton:!1,timer:3e3})}));case 26:case"end":return r.stop()}}),r)})))()},addProfile:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.newAbout.length>0)){t.next=8;break}return e.departmentAbout.department=e.$store.state.auth.user.department,r=e.departmentAbout,console.log(r),t.next=6,e.$store.dispatch("about/updateAbout",r).then((function(t){f.a.fire({title:"Success",text:"Department Profile Updated!",icon:"success",showConfirmButton:!1,timer:1500}),e.reload()})).catch((function(e){f.a.fire({title:"Oops!",text:"Exceeds Word limit, (should be less than 150 words.)",icon:"warning",showConfirmButton:!1,timer:3e3})}));case 6:t.next=17;break;case 8:if(e.departmentAbout.annual_year=e.$store.state.selectedYear,e.departmentAbout.department=e.$store.state.auth.user.department,""==e.departmentAbout.introduction||""==e.departmentAbout.facilities){t.next=16;break}return r=e.departmentAbout,t.next=14,e.$store.dispatch("about/addProfile",r).then((function(t){f.a.fire({title:"Success",text:"Profile Added!",icon:"success",showConfirmButton:!1,timer:1500}),e.reload()})).catch((function(e){f.a.fire({title:"Oops!",text:"Exceeds Word limit, (should be less than 150 words.)",icon:"warning",showConfirmButton:!1,timer:3e3})}));case 14:t.next=17;break;case 16:f.a.fire({title:"Oops!",text:"Please enter data before submit",type:"warning",showConfirmButton:!1,timer:3e3});case 17:case"end":return t.stop()}}),t)})))()},reload:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$nuxt.$loading.start(),"",r="department.id=".concat(e.$store.state.auth.user.department,"&annual_year=").concat(e.annualYear),t.next=5,e.$store.dispatch("about/setAboutData",{query:r});case 5:e.newAbout.length>0?(e.departmentAbout=Object.assign({},e.newAbout[0]),null!==e.$store.state.about.newAbout[0].image_1?e.img_url1=e.$store.state.about.newAbout[0].image_1.url:e.img_url1=null,null!=e.$store.state.about.newAbout[0].image_2?e.img_url2=e.$store.state.about.newAbout[0].image_2.url:e.img_url2=null,null!=e.$store.state.about.newAbout[0].image_3?e.img_url3=e.$store.state.about.newAbout[0].image_3.url:e.img_url3=null):e.departmentAbout=Object.assign({},e.editedItem),e.$nuxt.$loading.finish();case 7:case"end":return t.stop()}}),t)})))()},changeReportingYear:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("setReportingYear",e.annualYear);case 2:return t.next=4,e.reload();case 4:case"end":return t.stop()}}),t)})))()},setReportingYear:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.Ydialog=!1,t.next=3,e.$store.dispatch("setReportingYear",e.annualYear);case 3:e.reload();case 4:case"end":return t.stop()}}),t)})))()}}},_=(r(676),r(42)),w=r(47),x=r.n(w),A=r(110),y=r(471),$=r(483),O=r(91),D=r(488),k=r(510),C=r(127),F=r(195),j=r(171),S=r(472),R=r(475),T=r(274),component=Object(_.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("YearDialog"),e._v(" "),r("v-row",{staticClass:"my-0"},[r("v-col",{staticClass:"pb-0 px-4",attrs:{cols:"12",lg:"9"}},[r("span",{staticClass:"theme-border"},[r("h1",{staticClass:"ml-3"},[e._v(e._s(e.$metaInfo.title))])])]),e._v(" "),r("v-col",{attrs:{cols:"12",lg:"3"}},[r("v-select",{attrs:{filled:"",color:"green",items:e.reportYears,"item-text":"val","item-value":"id",label:"Reporting Year",required:""},on:{input:e.reload},model:{value:e.annualYear,callback:function(t){e.annualYear=t},expression:"annualYear"}})],1)],1),e._v(" "),r("v-row",{staticClass:"mt-6",attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("v-form",{ref:"about",attrs:{"lazy-validation":""},on:{submit:function(e){e.preventDefault()}}},[r("p",{staticClass:"mb-3"},[r("span",[e._v("A. Introduction: Specifically indicate the recognition /\n            contribution of the Department during the year to policies,\n            planning and programmes at State / National and International\n            levels.")])]),e._v(" "),r("div",[r("client-only",[r("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig},model:{value:e.departmentAbout.introduction,callback:function(t){e.$set(e.departmentAbout,"introduction",t)},expression:"departmentAbout.introduction"}})],1),e._v(" "),""!=e.departmentAbout.introduction?r("span",[e._v("Words: "+e._s(e.departmentAbout.introduction.split(" ").length))]):e._e()],1),e._v(" "),r("div",[r("p",{staticClass:"mt-3"},[r("span",[e._v("B. New facilities developed, new initiatives taken up by the\n              Department(s) within NIMHANS during the year.")])]),e._v(" "),r("div",[r("client-only",[r("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig},model:{value:e.departmentAbout.facilities,callback:function(t){e.$set(e.departmentAbout,"facilities",t)},expression:"departmentAbout.facilities"}})],1),e._v(" "),""!=e.departmentAbout.facilities?r("span",[e._v("Words: "+e._s(e.departmentAbout.facilities.split(" ").length))]):e._e()],1)]),e._v(" "),r("v-row",[r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"ma-3",attrs:{color:"success"},on:{click:e.addProfile}},[e._v("\n            Submit\n          ")])],1)],1)],1)],1),e._v(" "),e.departmentAbout.id?r("v-row",{staticClass:"mb-4",attrs:{"no-gutters":""}},[r("span",{staticClass:"theme-border"},[r("h1",{staticClass:"ml-3"},[e._v("Related Images")])])]):e._e(),e._v(" "),e.departmentAbout.id?r("v-row",{staticClass:"center my-2 mx-1",attrs:{justify:"space-between"}},[r("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.hover;return[r("v-img",{staticClass:"grey lighten-2",attrs:{src:""+e.$axios.defaults.baseURL+e.img_url1,"lazy-src":"/image_placeholder.png","max-width":"30%","max-height":"300"},scopedSlots:e._u([{key:"placeholder",fn:function(){return[r("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)},[r("v-fade-transition",[n?r("v-overlay",{attrs:{absolute:"",color:"#036358"}},[r("v-btn",{on:{click:function(t){return e.$refs.image1.click()}}},[e._v("\n                "+e._s(e.img_url1?"Edit Image":"Upload Image")+"\n              ")])],1):e._e()],1)],1)]}}],null,!1,3247901725)}),e._v(" "),r("input",{ref:"image1",staticStyle:{display:"none"},attrs:{type:"file","max-size":"10485760",label:"File input"},on:{change:e.handleFileUpload1}}),e._v(" "),r("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.hover;return[r("v-img",{staticClass:"grey lighten-2",attrs:{src:""+e.$axios.defaults.baseURL+e.img_url2,"lazy-src":"/image_placeholder.png","aspect-ratio":"1","max-width":"30%","max-height":"300"}},[r("v-fade-transition",[n?r("v-overlay",{attrs:{absolute:"",color:"#036358"}},[r("v-btn",{on:{click:function(t){return e.$refs.image2.click()}}},[e._v("\n                "+e._s(e.img_url2?"Edit Image":"Upload Image")+"\n              ")])],1):e._e()],1)],1)]}}],null,!1,3257053900)}),e._v(" "),r("input",{ref:"image2",staticStyle:{display:"none"},attrs:{type:"file",label:"File input"},on:{change:e.handleFileUpload2}}),e._v(" "),r("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.hover;return[r("v-img",{staticClass:"grey lighten-2",attrs:{src:""+e.$axios.defaults.baseURL+e.img_url3,"lazy-src":"/image_placeholder.png","max-width":"30%","max-height":"300"},scopedSlots:e._u([{key:"placeholder",fn:function(){return[r("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)},[r("v-fade-transition",[n?r("v-overlay",{attrs:{absolute:"",color:"#036358"}},[r("v-btn",{on:{click:function(t){return e.$refs.image3.click()}}},[e._v("\n                "+e._s(e.img_url3?"Edit Image":"Upload Image")+"\n              ")])],1):e._e()],1)],1)]}}],null,!1,2338225823)}),e._v(" "),r("input",{ref:"image3",staticStyle:{display:"none"},attrs:{type:"file",label:"File input"},on:{change:e.handleFileUpload3}})],1):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;x()(component,{VBtn:A.a,VCol:y.a,VContainer:$.a,VFadeTransition:O.d,VForm:D.a,VHover:k.a,VImg:C.a,VOverlay:F.a,VProgressCircular:j.a,VRow:S.a,VSelect:R.a,VSpacer:T.a})}}]);